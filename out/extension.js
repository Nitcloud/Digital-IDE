module.exports=(()=>{var e={444:(e,t,n)=>{"use strict";const i=n(549),r=n(809),o=n(473),s=n(395),a=n(535);t.dirs=r,t.files=o,t.prjs=s,t.monitor=a,t.registerPrjsServer=function(e,t){e.subscriptions.push(i.commands.registerCommand("TOOL.Gen_Property",(()=>{s.generatePropertyFile(t)}))),e.subscriptions.push(i.commands.registerCommand("TOOL.Overwrite_InitProperty",(()=>{s.overwriteInitProperty(t)}))),e.subscriptions.push(i.commands.registerCommand("FPGA.Add_dev",(()=>{s.addDevice(t)}))),e.subscriptions.push(i.commands.registerCommand("FPGA.Delete_dev",(()=>{s.delDevice(t)})))}},535:(e,t,n)=>{"use strict";const i=n(747),r=n(622),o=n(549),s=n(661),a=(n(809),n(395)),l=n(473);let c=!1;function u(e){let t="",n=i.readFileSync(e,"utf-8").split("\n");for(let e=0;e<n.length;e++){const i=n[e];(-1!=i.indexOf("ERROR:")||-1!=i.indexOf("CRITICAL WARNING:"))&&(t=t+i+"\n")}return t}t.monitor=function(e,t,n,i,h){let p=o.workspace.createFileSystemWatcher("**/*.{log,json,v,sv,vhl}",!1,!1,!1);p.onDidChange((e=>{if(""!=t.propertyPath)var o=l.pullJsonInfo(t.propertyPath),s=`${t.workspacePath}prj/xilinx/`+o.PRJ_NAME.FPGA+".runs/synth_1/runme.log",p=`${t.workspacePath}prj/xilinx/`+o.PRJ_NAME.FPGA+".runs/impl_1/runme.log",d=`${t.workspacePath}prj/xilinx/`+o.PRJ_NAME.FPGA+".sim/sim_1/behav/xsim/xvlog.log",m=`${t.workspacePath}prj/xilinx/`+o.PRJ_NAME.FPGA+".sim/sim_1/behav/xsim/elaborate.log";if(-1!=e.fsPath.replace("//","/").replace(/\\/g,"/").indexOf("synth_1/runme.log")){let e=u(s);""!=e&&(i.show(!0),i.appendLine(e))}else if(-1!=e.fsPath.replace("//","/").replace(/\\/g,"/").indexOf("impl_1/runme.log")){let e=u(p);""!=e&&(i.show(!0),i.appendLine(e))}else if(-1!=e.fsPath.replace("//","/").replace(/\\/g,"/").indexOf("xsim/xvlog.log")||-1!=e.fsPath.replace("//","/").replace(/\\/g,"/").indexOf("xsim/elaborate.log")){let e=u(d);""!=e&&(i.show(!0),i.appendLine(e));let t=u(m);""!=t&&(i.show(!0),i.appendLine(t))}else if("property.json"==r.basename(e.fsPath)){if(c)return;c=setTimeout((()=>{c=!1,function(e,t,n){a.refreshPrjFolder(t);let i=a.getLibParam(t);a.refreshPrjFiles(`${t.currentSrcPath}/src`,i),a.refreshPrjFiles(`${t.currentSrcPath}/sim`,i),e.HDLparam=[],e.build_index(i).then((()=>{e.updateMostRecentSymbols(void 0),n()}))}(n,t,h)}),1e3),c=!0}else!function(e,t,n,i){let r=[];a.refreshPrjFiles(e,r)>0&&(r=a.getLibParam(n),a.refreshPrjFiles(`${n.currentSrcPath}/src`,r),a.refreshPrjFiles(`${n.currentSrcPath}/sim`,r),t.HDLparam=[],t.build_index(r).then((()=>{t.updateMostRecentSymbols(void 0),i()})))}(e.fsPath.replace("//","/").replace(/\\/g,"/"),n,t,h)})),p.onDidDelete((e=>{"property.json"==r.basename(e.fsPath)&&(t.propertyPath="")})),s.createMonitor(e,{interval:1},(function(e){e.on("created",(function(e){!function(e,t,n){c=setTimeout((()=>{c=!1,console.log("remove");let i=a.getLibParam(e);a.refreshPrjFiles(`${e.currentSrcPath}/src`,i),a.refreshPrjFiles(`${e.currentSrcPath}/sim`,i),t.HDLparam=[],t.build_index(i).then((()=>{t.updateMostRecentSymbols(void 0),n()}))}),1e3),c=!0}(t,n,h)})),e.on("removed",(e=>{!function(e,t,n){c||(c=setTimeout((()=>{c=!1,console.log("remove");let i=a.getLibParam(e);a.refreshPrjFiles(`${e.currentSrcPath}/src`,i),a.refreshPrjFiles(`${e.currentSrcPath}/sim`,i),t.HDLparam=[],t.build_index(i).then((()=>{t.updateMostRecentSymbols(void 0),n()}))}),1e3),c=!0)}(t,n,h)}))}))}},661:(e,t,n)=>{n(669);var i=n(747),r=n(622),o=n(614);function s(e,t,n){n||(n=t,t={}),n.files||(n.files={}),n.pending||(n.pending=0),n.pending+=1,i.stat(e,(function(o,a){if(o)return n(o);n.files[e]=a,i.readdir(e,(function(o,a){if(o)return"EACCES"===o.code&&t.ignoreUnreadableDir?n():n(o);n.pending-=1,a.forEach((function(o,a){o=r.join(e,o),n.pending+=1,i.stat(o,(function(e,i){var a=!1,l=!1;if(e){if("ENOENT"!==e.code&&"EPERM"!==e.code&&t.ignoreNotPermitted)return n(e);a=!0}if(n.pending-=1,l=0===n.pending,!a){if(t.ignoreDotFiles&&"."===r.basename(o)[0])return l&&n(null,n.files);if(t.filter&&!t.filter(o,i))return l&&n(null,n.files);n.files[o]=i,!i.isDirectory()||t.ignoreDirectoryPattern&&t.ignoreDirectoryPattern.test(o)||s(o,t,n),(l=0===n.pending)&&n(null,n.files)}}))})),0===n.pending&&n(null,n.files)})),0===n.pending&&n(null,n.files)}))}var a=Object.create(null);t.watchTree=function(e,t,n){n||(n=t,t={}),s(e,t,(function(o,s){if(o)throw o;var l=function(e){var o={};t.interval&&(o.interval=100*t.interval),i.watchFile(e,o,(function(o,a){s[e]&&!s[e].isDirectory()&&0!==o.nlink&&s[e].mtime.getTime()==o.mtime.getTime()||(s[e]=o,s[e].isDirectory()?i.readdir(e,(function(o,a){o||a.forEach((function(o){var a=r.join(e,o);s[a]||!0===t.ignoreDotFiles&&"."==o[0]||i.stat(a,(function(e,i){t.filter&&!t.filter(a,i)||(n(a,i,null),s[a]=i,l(a))}))}))})):n(e,o,a),0===o.nlink&&(delete s[e],i.unwatchFile(e)))}))};for(var c in l(e),s)l(c);a[e]=s,n(s,null,null)}))},t.unwatchTree=function(e){a[e]&&(Object.keys(a[e]).forEach(i.unwatchFile),a[e]=!1)},t.createMonitor=function(e,n,i){i||(i=n,n={});var r=new o.EventEmitter;r.stop=t.unwatchTree.bind(null,e);var s={file:null,action:null,stat:null};t.watchTree(e,n,(function(e,t,n){if("object"==typeof e&&null==n&&null===t)return r.files=e,i(r);if(!n&&(s.file!=e||"created"!=s.action))return s={file:e,action:"created",stat:t},r.emit("created",e,t);if(t&&0===t.nlink&&(s.file!=e||"removed"!=s.action))return s={file:e,action:"removed",stat:t},r.emit("removed",e,t);if(null===s.file)return r.emit("changed",e,t,n);try{if(s.stat.mtime.getTime()!==t.mtime.getTime())return r.emit("changed",e,t,n)}catch(i){return r.emit("changed",e,t,n)}}))},t.walk=s},809:(e,t,n)=>{"use strict";const i=n(747),r=n(622);function o(e){return i.existsSync(e)||o(r.dirname(e))&&i.mkdirSync(e),!0}function s(e){let t=[];i.existsSync(e)&&(t=i.readdirSync(e),t.forEach((t=>{let n=r.join(e,t).replace(/\\/g,"/");i.statSync(n).isDirectory()?s(n):i.unlinkSync(n)})),i.rmdirSync(e))}t.mkdir=o,t.deleteDir=s,t.movedir=function(e,t){e!=t&&(t=t+"/"+r.basename(e),i.existsSync(e)?(i.existsSync(t)&&s(t),i.renameSync(e,t)):o(t))},t.copydir=function e(t,n,o=[]){i.readdir(t,(function(s,a){null===s?a.forEach((function(s){let a=r.join(t,s);o.some((e=>e===s))||i.stat(a,(function(t,l){if(l.isFile()){const e=r.join(n,s);i.copyFile(a,e,(e=>{}))}else{let t=r.join(n,s);i.mkdir(t,(e=>{})),e(a,t,o)}}))})):s&&console.error(s)}))},t.readFolder=function(e){return i.readdirSync(e)}},473:(e,t,n)=>{"use strict";const i=n(747),r=n(622),o=n(549),s=n(809);t.copyFile=function(e,t){if(i.existsSync(t)||s.mkdir(t),i.statSync(t).isDirectory()&&(t=t+r.sep+r.basename(e)),i.existsSync(e)){var n=i.readFileSync(e,"utf8");i.writeFileSync(t,n,"utf8")}},t.deleteFile=function(e){i.existsSync(e)&&i.unlinkSync(e)},t.pickFile=function(e,t){let n=i.readdirSync(e),o=[];return n.filter((function(e){r.extname(e).toLowerCase()===t&&o.push(e)})),o},t.pickAllFile=function e(t,n,s){let a=i.readdirSync(t);for(let l=0;l<a.length;l++){const c=a[l];i.statSync(`${t}/${c}`).isDirectory()?e(`${t}/${c}`,n,s):r.extname(c).toLowerCase()===n&&s.push(o.Uri.file(`${t}/${c}`.replace("//","/").replace(/\\/g,"/")))}},t.pullJsonInfo=function(e){var t=i.readFileSync(e,"utf8");return JSON.parse(t)},t.pushJsonInfo=function(e,t){var n=JSON.stringify(t,null,"\t");s.mkdir(r.dirname(e)),i.writeFileSync(e,n,"utf8")},t.isHasAttr=function(e,t){let n=e,i=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split(".");for(let e=0;e<i.length;e++){const t=i[e];if(!n)return!1;if(!(t in n))return!1;n=n[t]}return!0},t.isHasValue=function(e,t,n){let i=e,r=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split(".");for(let e=0;e<r.length;e++){const t=r[e];if(!i)return!1;if(!(t in i))return!1;if(i=i[t],e==r.length-1&&i!=n)return!1}return!0}},395:(e,t,n)=>{"use strict";const i=n(747),r=n(622),o=n(549),s=n(809),a=n(473);var l;function c(e,t){if(t.os=process.platform,t.rootPath=e.replace(/\\/g,"/"),0!=o.workspace.workspaceFolders.length)var n=o.workspace.workspaceFolders[0].uri.toString();else n="";n=n.substr(8,n.length);var r=(n+="/")[0];n=n.substr(4,n.length),t.prjInfo=null,t.workspacePath=r+":"+n,t.workspacePath=t.workspacePath.replace(/\\/g,"/"),t.prjInitParam=`${t.rootPath}/../prjInitParam.json`,t.propertyPath=`${t.workspacePath}.vscode/property.json`,i.existsSync(t.propertyPath)||(i.existsSync(`${t.workspacePath}property.json`)?t.propertyPath=`${t.workspacePath}property.json`:(t.prjInfo=null,t.propertyPath="",t.currentSrcPath=`${t.workspacePath}`)),""!=t.propertyPath&&(t.prjInfo=a.pullJsonInfo(t.propertyPath),"none"!=t.prjInfo.SOC_MODE.soc?t.currentSrcPath=`${t.workspacePath}user/Hardware`:t.currentSrcPath=`${t.workspacePath}user`,a.isHasAttr(t.prjInfo,"HardwareSrc")&&(t.currentSrcPath=`${t.prjInfo.HardwareSrc}`))}function u(e,t){let n=[".v",".V",".vh",".vl",".sv",".SV",".vhd",".vhdl",".vho",".vht"];if(i.existsSync(e))if(i.statSync(e).isDirectory())for(let i=0;i<n.length;i++){const r=n[i];a.pickAllFile(e,r,t)}else for(let i=0;i<n.length;i++){const s=n[i];if(r.extname(e).toLowerCase()===s){t.push(o.Uri.file(e.replace("//","/").replace(/\\/g,"/")));break}}return t.length}function h(e){if(""!=e.propertyPath){e.prjInfo=a.pullJsonInfo(e.propertyPath),"none"!=e.prjInfo.SOC_MODE.soc?e.currentSrcPath=`${e.workspacePath}user/Hardware`:e.currentSrcPath=`${e.workspacePath}user`;let t="xip_repo_path\n";return t+=o.workspace.getConfiguration().get("PRJ.xilinx.IP.repo.path")+"\n",t+="FPGA_VERSION\n",t+=e.prjInfo.FPGA_VERSION+"\n",t+="PRJ_NAME.FPGA\n",t+=e.prjInfo.PRJ_NAME.FPGA+"\n",t+="PRJ_NAME.SOC\n",t+=e.prjInfo.PRJ_NAME.SOC+"\n",t+="SOC_MODE.soc\n",t+=e.prjInfo.SOC_MODE.soc+"\n",t+="SOC_MODE.bd_file\n",t+=e.prjInfo.SOC_MODE.bd_file+"\n",t+="SOC_MODE.os\n",t+=e.prjInfo.SOC_MODE.os+"\n",t+="SOC_MODE.app\n",t+=e.prjInfo.SOC_MODE.app+"\n",t+="enableShowlog\n",t+=e.prjInfo.enableShowlog+"\n",t+="Device\n",t+=e.prjInfo.Device+"\n",i.writeFileSync(`${e.rootPath}/../resources/tool/CONFIG`,t),e.prjInfo}return null}t.prjParam=l,t.getOpeParam=c,t.generatePropertyFile=function(e){""==e.propertyPath?(e.propertyPath=`${e.workspacePath}.vscode/property.json`,o.window.showInformationMessage("Where you want to generate?",".vscode","root").then((function(t){".vscode"==t?e.propertyPath=`${e.workspacePath}.vscode/property.json`:"root"==t&&(e.propertyPath=`${e.workspacePath}property.json`),a.pushJsonInfo(e.propertyPath,a.pullJsonInfo(e.prjInitParam))}))):o.window.showWarningMessage("property file already exists !!!")},t.refreshPrjFiles=u,t.refreshPrjFolder=function(e){if(""!=e.propertyPath){let t=a.pullJsonInfo(e.propertyPath);if(s.mkdir(`${e.workspacePath}prj/xilinx`),s.mkdir(`${e.workspacePath}prj/intel`),s.mkdir(`${e.workspacePath}prj/simulation`),"none"==t.SOC_MODE.soc)if(i.existsSync(`${e.workspacePath}user/Software`)&&(o.workspace.getConfiguration().get("PRJ.file.structure.notice")?o.window.showWarningMessage("Software will be deleted.","Yes","No").then((function(t){"Yes"==t&&s.deleteDir(`${e.workspacePath}user/Software`)})):s.deleteDir(`${e.workspacePath}user/Software`)),i.existsSync(`${e.workspacePath}user/Hardware`)){let t=i.readdirSync(`${e.workspacePath}user/Hardware`);for(let n=0;n<t.length;n++){const i=t[n];s.movedir(`${e.workspacePath}user/Hardware/${i}`,`${e.workspacePath}user`)}s.deleteDir(`${e.workspacePath}user/Hardware`)}else s.mkdir(`${e.workspacePath}user/src`),s.mkdir(`${e.workspacePath}user/sim`),s.mkdir(`${e.workspacePath}user/data`);else{if(i.existsSync(`${e.workspacePath}user`)){let t=i.readdirSync(`${e.workspacePath}user`);if(!i.existsSync(`${e.workspacePath}user/Hardware`)){s.mkdir(`${e.workspacePath}user/Hardware`);for(let n=0;n<t.length;n++){const i=t[n];s.movedir(`${e.workspacePath}user/${i}`,`${e.workspacePath}user/Hardware`)}}}else s.mkdir(`${e.workspacePath}user/Hardware/src`),s.mkdir(`${e.workspacePath}user/Hardware/sim`),s.mkdir(`${e.workspacePath}user/Hardware/data`);s.mkdir(`${e.workspacePath}user/Software/data`),s.mkdir(`${e.workspacePath}user/Software/src`)}}},t.refreshPrjInfo=h,t.getLibParam=function(e){let t=[];c(e.rootPath,e),l=h(e);let n=o.workspace.getConfiguration().get("PRJ.customer.Lib.repo.path");if(a.isHasAttr(l,"HardwareLIB.Common"))for(let n=0;n<l.HardwareLIB.Common.length;n++){const i=l.HardwareLIB.Common[n];u(`${e.rootPath}/../lib/src_lib/Hardware/${i}`,t)}if(a.isHasAttr(l,"HardwareLIB.Customer")&&i.existsSync(n))for(let e=0;e<l.Customer.length;e++)u(`${n}/${l.Customer[e]}`,t);let p=[];for(var d=0,m=t.length;d<m;d++){for(var g=d+1;g<m;g++)t[d].path===t[g].path&&(g=++d);p.push(t[d])}if(t=p,a.isHasValue(l,"HardwareLIB.State","real")){let o="";o="none"!=l.SOC_MODE.soc?e.workspacePath+"user/Hardware/src/lib/":e.workspacePath+"user/src/lib/";let s=[];if(0!=u(o,s))for(let e=0;e<s.length;e++){const n=s[e];let r=0;for(let e=0;e<t.length;e++){const i=t[e];n.fsPath!=i.fsPath||(r=1)}r||i.unlinkSync(n.fsPath.replace("//","/").replace(/\\/g,"/"))}for(let s=0;s<t.length;s++){let l=t[s].fsPath.replace("//","/").replace(/\\/g,"/"),c=l.replace(`${e.rootPath}/../lib/src_lib/Hardware/`,"");i.statSync(l).isDirectory()||(c=c.replace(`/${r.basename(c)}`,"")),-1!=l.indexOf(n)&&""!=n&&(c=l.replace(`${n}/`,"")),c=o+c,i.existsSync(c)||a.copyFile(l,c)}t=[]}else if(a.isHasValue(l,"HardwareLIB.State","virtual")){let n="";n="none"!=l.SOC_MODE.soc?e.workspacePath+"user/Hardware/src/lib":e.workspacePath+"user/src/lib","xilinx"==l.FPGA_VERSION&&function(e,t){let n="";for(let t=0;t<e.length;t++)n+=`add_file ${e[t].fsPath.replace("//","/").replace(/\\/g,"/")}\n`;i.writeFileSync(`${t.rootPath}/../resources/tool/Xilinx/Script/Vivado/library.tcl`,n,"utf8")}(t,e),i.existsSync(n)&&(o.workspace.getConfiguration().get("PRJ.file.structure.notice")?o.window.showWarningMessage("src/lib will be deleted.","Yes","No").then((function(e){"Yes"==e&&s.deleteDir(n)})):s.deleteDir(n))}return t},t.addDevice=function(e){let t=a.pullJsonInfo(`${e.rootPath}/../property.json`);o.window.showInputBox({password:!1,ignoreFocusOut:!0,placeHolder:"Please input the name of device"}).then((n=>{-1==t.properties.Device.enum.indexOf(n)?(t.properties.Device.enum.push(n),a.pushJsonInfo(`${e.rootPath}/../property.json`,t),o.window.showInformationMessage(`Add the ${n} successfully!!!`)):o.window.showWarningMessage("The device already exists")}))},t.delDevice=function(e){let t=a.pullJsonInfo(`${e.rootPath}/../property.json`);o.window.showQuickPick(t.properties.Device.enum).then((n=>{if(n){for(var i=0;i<t.properties.Device.enum.length;i++)n==t.properties.Device.enum[i]&&t.properties.Device.enum.splice(i,1);a.pushJsonInfo(`${e.rootPath}/../property.json`,t),o.window.showInformationMessage(`Delete the ${n} successfully!!!`)}}))},t.overwriteInitProperty=function(e){let t=`${e.rootPath}/../prjInitParam.json`;const n={preview:!1,viewColumn:o.ViewColumn.Active};o.window.showTextDocument(o.Uri.file(t),n)}},586:(e,t,n)=>{"use strict";t.__esModule=!0;var i=n(549),r=function(){function e(e){this.diagnostic_collection=i.languages.createDiagnosticCollection(),this.name=e}return e.prototype.startLint=function(e){this.lint(e)},e.prototype.removeFileDiagnostics=function(e){this.diagnostic_collection.delete(e.uri)},e}();t.default=r},394:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var o=n(549),s=n(129),a=n(586),l="win32"===process.platform,c=function(e){function t(){var t=e.call(this,"iverilog")||this;return o.workspace.onDidChangeConfiguration((function(){t.getConfig()})),t.getConfig(),t}return r(t,e),t.prototype.getConfig=function(){this.iverilogArgs=o.workspace.getConfiguration().get("HDL.linting.iverilog.arguments"),this.runAtFileLocation=o.workspace.getConfiguration().get("HDL.linting.iverilog.runAtFileLocation")},t.prototype.lint=function(e){var t=this,n=e.uri.fsPath,i=1==l?n.lastIndexOf("\\"):n.lastIndexOf("/"),r=n.substr(0,i),a=1==this.runAtFileLocation?r:o.workspace.rootPath,c="iverilog "+("systemverilog"==e.languageId?"-g2012":"")+" -t null "+this.iverilogArgs+' "'+e.fileName+'"';s.exec(c,{cwd:a},(function(n,i,r){var s=[];r.split(/\r?\n/g).forEach((function(t,n){if(t.startsWith(e.fileName)){var i=(t=t.replace(e.fileName,"")).split(":");console.log(i[1]+" "+i[2]);var r=parseInt(i[1].trim())-1;if(3==i.length)s.push({severity:o.DiagnosticSeverity.Error,range:new o.Range(r,0,r,Number.MAX_VALUE),message:i[2].trim(),code:"iverilog",source:"iverilog"});else if(i.length>=4){var a;a="error"==i[2].trim()?o.DiagnosticSeverity.Error:"warning"==i[2].trim()?o.DiagnosticSeverity.Warning:o.DiagnosticSeverity.Information,s.push({severity:a,range:new o.Range(r,0,r,Number.MAX_VALUE),message:i[3].trim(),code:"iverilog",source:"iverilog"})}}})),t.diagnostic_collection.set(e.uri,s)}))},t}(a.default);t.default=c},561:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var o=n(549),s=n(129),a=n(586),l="win32"===process.platform,c=function(e){function t(){var t=e.call(this,"modelsim")||this;return o.workspace.onDidChangeConfiguration((function(){t.getConfig()})),t.getConfig(),t}return r(t,e),t.prototype.getConfig=function(){this.modelsimArgs=o.workspace.getConfiguration().get("HDL.linting.modelsim.arguments"),this.modelsimWork=o.workspace.getConfiguration().get("HDL.linting.modelsim.work"),this.runAtFileLocation=o.workspace.getConfiguration().get("HDL.linting.modelsim.runAtFileLocation")},t.prototype.lint=function(e){var t=this,n=e.uri.fsPath,i=1==l?n.lastIndexOf("\\"):n.lastIndexOf("/"),r=n.substr(0,i),a=1==this.runAtFileLocation?r:o.workspace.rootPath,c="vlog -nologo -work "+this.modelsimWork+' "'+e.fileName+'" '+this.modelsimArgs;s.exec(c,{cwd:a},(function(n,i,r){var s=[];i.split(/\r?\n/g).forEach((function(t,n){var i;if(t.startsWith("**")){var r=t.match("^\\*\\* (((Error)|(Warning))( \\(suppressible\\))?: )(\\([a-z]+-[0-9]+\\) )?([^\\(]*)\\(([0-9]+)\\): (\\([a-z]+-[0-9]+\\) )?((((near|Unknown identifier|Undefined variable):? )?[\"']([\\w:;\\.]+)[\"'][ :.]*)?.*)");try{if(r[7]!=e.fileName)return;switch(r[2]){case"Error":i=o.DiagnosticSeverity.Error;break;case"Warning":i=o.DiagnosticSeverity.Warning;break;default:i=o.DiagnosticSeverity.Information}var a=parseInt(r[8])-1,l=r[10];s.push({severity:i,range:new o.Range(a,0,a,Number.MAX_VALUE),message:l,code:"modelsim",source:"modelsim"})}catch(e){s.push({severity:i,range:new o.Range(0,0,0,Number.MAX_VALUE),message:t,code:"modelsim",source:"modelsim"})}}})),t.diagnostic_collection.set(e.uri,s)}))},t}(a.default);t.default=c},216:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var o=n(549),s=n(129),a=n(586),l="win32"===process.platform,c=function(e){function t(){var t=e.call(this,"verilator")||this;return o.workspace.onDidChangeConfiguration((function(){t.getConfig()})),t.getConfig(),t}return r(t,e),t.prototype.getConfig=function(){this.verilatorArgs=o.workspace.getConfiguration().get("HDL.linting.verilator.arguments",""),this.runAtFileLocation=o.workspace.getConfiguration().get("HDL.linting.verilator.runAtFileLocation")},t.prototype.splitTerms=function(e){for(var t=e.split(":"),n=0;n<t.length;n++)" "==t[n]?(t.splice(n,1),n--):t[n]=t[n].trim();return t},t.prototype.getSeverity=function(e){var t=o.DiagnosticSeverity.Information;return e.startsWith("Error")?t=o.DiagnosticSeverity.Error:e.startsWith("Warning")&&(t=o.DiagnosticSeverity.Warning),t},t.prototype.lint=function(e){var t=this,n=e.uri.fsPath,i=1==l?n.lastIndexOf("\\"):n.lastIndexOf("/"),r=n.substr(0,i),a=1==this.runAtFileLocation?r:o.workspace.rootPath,c="verilator "+("systemverilog"==e.languageId?"-sv":"")+" --lint-only -I"+r+" "+this.verilatorArgs+' "'+e.fileName+'"';s.exec(c,{cwd:a},(function(n,i,r){var s=[];r.split(/\r?\n/g).forEach((function(n,i){if(n.startsWith("%")&&(n=n.substr(1)).search(e.fileName)>0){n=(n=n.replace(e.fileName,"")).replace(/\s+/g," ").trim();var r=t.splitTerms(n),a=t.getSeverity(r[0]),l=r.slice(2).join(" "),c=parseInt(r[1].trim())-1;NaN!=c&&(console.log(r[1].trim()+" "+l),s.push({severity:a,range:new o.Range(c,0,c,Number.MAX_VALUE),message:l,code:"verilator",source:"verilator"}))}})),t.diagnostic_collection.set(e.uri,s)}))},t}(a.default);t.default=c},275:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var o=n(549),s=n(129),a=function(e){function t(){return e.call(this,"Xmixed")||this}return r(t,e),t.prototype.lint=function(e){var t=this,n="";if("systemverilog"==e.languageId)var i="Xvlog "+(n="-sv")+" -nolog "+e.fileName;else"verilog"==e.languageId?i="Xvlog "+n+" -nolog "+e.fileName:"vhdl"==e.languageId&&(i="Xvhdl "+n+" -nolog "+e.fileName);s.exec(i,(function(n,i,r){var s=[];i.split(/\r?\n/g).forEach((function(e){var t=e.split(/:?\s*(?:\[|\])\s*/).filter(Boolean);if(!(t.length<4||"ERROR"!=t[0])&&t[1].startsWith("VRFC")){var n=t[3].split(/:(\d+)/),i=(n[0],n[1]),r=parseInt(i)-1,a={severity:o.DiagnosticSeverity.Error,code:t[1],message:"["+t[1]+"] "+t[2],range:new o.Range(r,0,r,Number.MAX_VALUE),source:"Xmixed"};s.push(a)}})),t.diagnostic_collection.set(e.uri,s)}))},t}(n(586).default);t.default=a},125:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var o=n(549),s=n(129),a=function(e){function t(){return e.call(this,"xvhdl")||this}return r(t,e),t.prototype.lint=function(e){var t=this;if("vhdl"==e.languageId){var n="xvhdl  -nolog "+e.fileName;s.exec(n,(function(n,i,r){var s=[];i.split(/\r?\n/g).forEach((function(e){var t=e.split(/:?\s*(?:\[|\])\s*/).filter(Boolean);if(!(t.length<4||"ERROR"!=t[0])&&t[1].startsWith("VRFC")){var n=t[3].split(/:(\d+)/),i=(n[0],n[1]),r=parseInt(i)-1,a={severity:o.DiagnosticSeverity.Error,code:t[1],message:"["+t[1]+"] "+t[2],range:new o.Range(r,0,r,Number.MAX_VALUE),source:"xvhdl"};s.push(a)}})),t.diagnostic_collection.set(e.uri,s)}))}},t}(n(586).default);t.default=a},960:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var o=n(549),s=n(129),a=function(e){function t(){return e.call(this,"xvlog")||this}return r(t,e),t.prototype.lint=function(e){var t=this;if("vhdl"!=e.languageId){var n="xvlog "+("systemverilog"==e.languageId?"-sv":"")+" -nolog "+e.fileName;s.exec(n,(function(n,i,r){var s=[];i.split(/\r?\n/g).forEach((function(e){var t=e.split(/:?\s*(?:\[|\])\s*/).filter(Boolean);if(!(t.length<4||"ERROR"!=t[0])&&t[1].startsWith("VRFC")){var n=t[3].split(/:(\d+)/),i=(n[0],n[1]),r=parseInt(i)-1,a={severity:o.DiagnosticSeverity.Error,code:t[1],message:"["+t[1]+"] "+t[2],range:new o.Range(r,0,r,Number.MAX_VALUE),source:"xvlog"};s.push(a)}})),t.diagnostic_collection.set(e.uri,s)}))}},t}(n(586).default);t.default=a},948:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};t.__esModule=!0;var o=n(549),s=n(394),a=n(216),l=n(561),c=n(960),u=n(125),h=n(275);t.registerLinterServer=function(){var e=new p;o.commands.registerCommand("HDL.lint",e.RunLintTool)};var p=function(){function e(){o.workspace.onDidOpenTextDocument(this.lint,this,this.subscriptions),o.workspace.onDidSaveTextDocument(this.lint,this,this.subscriptions),o.workspace.onDidCloseTextDocument(this.removeFileDiagnostics,this,this.subscriptions),o.workspace.onDidChangeConfiguration(this.configLinter,this,this.subscriptions),this.configLinter()}return e.prototype.configLinter=function(){var e;if(e=o.workspace.getConfiguration("HDL.linting").get("linter"),null==this.linter||this.linter.name!=e)switch(e){case"iverilog":this.linter=new s.default;break;case"xvlog":this.linter=new c.default;break;case"xvhdl":this.linter=new u.default;break;case"xmixed":this.linter=new h.default;break;case"modelsim":this.linter=new l.default;break;case"verilator":this.linter=new a.default;break;default:console.log("Invalid linter name."),this.linter=null}null!=this.linter&&console.log("Using linter "+this.linter.name)},e.prototype.lint=function(e){var t=e.languageId;null==this.linter||"verilog"!==t&&"vhdl"!==t&&"systemverilog"!==t||this.linter.startLint(e)},e.prototype.removeFileDiagnostics=function(e){null!=this.linter&&this.linter.removeFileDiagnostics(e)},e.prototype.RunLintTool=function(){return i(this,void 0,void 0,(function(){var e,t,n,p=this;return r(this,(function(d){switch(d.label){case 0:return e=o.window.activeTextEditor.document.languageId,void 0===o.window.activeTextEditor||"verilog"!==e&&"vhdl"!==e&&"systemverilog"!==e?(o.window.showErrorMessage("HDL: No document opened"),[3,4]):[3,1];case 1:return[4,o.window.showQuickPick([{label:"iverilog",description:"Icarus Verilog"},{label:"xvlog",description:"Vivado Logical verilog and systemverilog Simulator"},{label:"xvhdl",description:"Vivado Logical VHDL Simulator"},{label:"xmixed",description:"Vivado Logical verilog and systemverilog and VHDL Simulator"},{label:"modelsim",description:"Modelsim"},{label:"verilator",description:"Verilator"}],{matchOnDescription:!0,placeHolder:"Choose a linter to run"})];case 2:if(void 0===(t=d.sent()))return[2];switch(t.label){case"iverilog":n=new s.default;break;case"xvlog":n=new c.default;break;case"xvhdl":n=new u.default;break;case"xmixed":n=new h.default;break;case"modelsim":n=new l.default;break;case"verilator":n=new a.default;break;default:return[2]}return[4,o.window.withProgress({location:o.ProgressLocation.Notification,title:"HDL: Running lint tool..."},(function(e,t){return i(p,void 0,void 0,(function(){return r(this,(function(e){return n.removeFileDiagnostics(o.window.activeTextEditor.document),n.startLint(o.window.activeTextEditor.document),[2]}))}))}))];case 3:d.sent(),d.label=4;case 4:return[2]}}))}))},e}();t.default=p},844:(e,t,n)=>{"use strict";n(747);const i=n(549);function r(e,t){let n=[];return e.forEach((e=>{e.moduleName==t.split("    .")[0]&&-1!=e.modulePath.indexOf(t.split("    .")[1])&&n.push(e)})),n}function o(e,t){let n=[];return e.forEach((e=>{e.moduleName==t&&n.push(e)})),n}function s(e,t){let n=[];return e.forEach((e=>{let i=e.moduleName+"    ."+e.modulePath.replace(t,"");n.push(i)})),n}new RegExp([/\/\/.*/].map((e=>"string"==typeof e?e:e.source)).join(""),"mg"),new RegExp([/\/\*[\s\S]*?\*\//].map((e=>"string"==typeof e?e:e.source)).join(""),"mg"),t.getWaveImagePath=function(e){let t=e.match(/\$dumpfile\s+\(\s*\"(.+){1}\"\s*\);/gi);return t=RegExp.$1,null==t&&(t=""),t},t.findModule=r,t.findModuleFromName=o,t.selectModule=async function(e,t){const n=await i.window.showQuickPick(s(e,t));var o;return n?0==(o=r(e,n)).length?(i.window.showErrorMessage("The module was not found !!!"),null):o.length>1?(i.window.showErrorMessage("Multiple identical modules exist in the same file !!!"),null):o[0]:null},t.selectCurrentFileModule=async function(e,t){if(!t)return null;let n=[];if(e.forEach((e=>{e.modulePath==t.fileName.replace(/\\/g,"/")&&n.push(e.moduleName)})),n.length>1)var r=await i.window.showQuickPick(n);else{if(1!=n.length)return null;r=n[0]}var s;return 0==(s=o(e,r)).length?(i.window.showErrorMessage("The module was not found !!!"),null):s.length>1?(i.window.showErrorMessage("Multiple identical modules exist in this file !!!"),null):s[0]},t.refreshModuleInfoList=s,t.refreshInstModulePath=function(e){e.forEach((t=>{t.instmodule.forEach((t=>{e.forEach((e=>{e.moduleName==t.instModule&&(t.instModPath=e.modulePath)}))}))}))},t.removeCurrentFileParam=function(e,t){let n=e.uri._fsPath.replace(/\\/g,"/"),i=[];return t.forEach((e=>{e.modulePath!=n&&i.push(e)})),i},t.isIllegalRange=function(e,t,n){let i=!1;for(let r=0;r<t.length;r++){const o=t[r];if(e.index+n<=o.end&&e.index+n>=o.start){i=!0;break}i=!1}return i},t.getTopElement=function(e,t){let n=[],i=!0;null!=t&&n.push(t);for(let t=0;t<e.length;t++){const r=e[t];for(let t=0;t<e.length;t++){const n=e[t];for(let e=0;e<n.instmodule.length;e++)if(n.instmodule[e].instModule==r.moduleName){i=!1;break}if(!i)break}if(i){let e={name:"",type:"",fspath:""};e.type=r.moduleName,e.fspath=r.modulePath,n.push(e)}else i=!0}return n},t.getChildElement=function(e,t){let n=[];return t.forEach((t=>{t.moduleName==e&&t.instmodule.forEach((e=>{let t={name:"",type:"",fspath:""};t.name=e.instName,t.type=e.instModule,t.fspath=e.instModPath,n.push(t)}))})),n},t.getSrcTopElement=function(e,t){let n=[];for(let i=0;i<t.length;i++){const r=t[i];let o=r.fspath.replace(e.workspacePath,"");-1==o.indexOf("src")&&-1==o.indexOf("source")||n.push(r)}return n},t.getTbTopElement=function(e,t){let n=[];for(let i=0;i<t.length;i++){const r=t[i];-1!=r.fspath.replace(e.workspacePath,"").indexOf("sim")&&n.push(r)}return n}},743:(e,t,n)=>{"use strict";const i=n(844);var r=new RegExp([/--.*/].map((e=>"string"==typeof e?e:e.source)).join(""),"mg"),o=new RegExp([/\*[\s\S]*?\*\//].map((e=>"string"==typeof e?e:e.source)).join(""),"mg"),s=new RegExp([/entity\s+(?<name>\w+)\s*is\s*/,/(generic\s*\((?<param>[\w\W]+)\))?\s*/,/port\s*\((?<port>[\w\W]+)\)\s*/,/(?<end>;)\s*/,/end entity;/].map((e=>"string"==typeof e?e:e.source)).join(""),"mgi"),a=new RegExp([/(?<name>\w+)/,/\s*:\s*/,/(?<type>\w+)/,/\s+/,/(generic\s+map\s*\(.*?\))?\s*/,/(port\s+map\s*\(.*?\))\s*/,/(?<end>;)/].map((e=>"string"==typeof e?e:e.source)).join(""),"mgi"),l=new RegExp([/(?<name>\w+)/,/\s*:\s*/,/(?<type>integer|natural|postive|time)/,/\s*/,/(:=)?\s*/,/(?<init>\S+)?/,/\s*(\)|;)/].map((e=>e.source)).join(""),"mgi"),c=new RegExp([/(?<name>\w+)/,/\s*:\s*/,/(?<type>in|out|inout|buffer)/,/\s+/,/(signed|unsigned|std_logic|std_logic_vector)\s*/,/(?<width>\([0-9]+\s+downto\s+[0-9]+\))?/,/\s*(\)|;)/].map((e=>e.source)).join(""),"mgi"),u=[c,l,a],h=[r,o];function p(e,t,n,r,o,s,h){e||(e=t.getText());for(let m=0;m<u.length;m++)for(var p=u[m];;){let u=p.exec(e);if(null==u)break;if(!(0==u.index&&null!=n||i.isIllegalRange(u,r,s))){if(null!=h)if(p==c){var d=u.groups.name.split(",");for(let e=0;e<d.length;e++)if(u.groups.name=d[e],""!=u.groups.name){u.groups.name=u.groups.name.replace(/(,|;)/,"");let e=h.setSymbolInformation(u,n,t,s);h.symbols.push(e)}}else{let e=h.setSymbolInformation(u,n,t,s);h.symbols.push(e)}if(null!=o)switch(p){case c:for(let e=0;e<d.length;e++){const t=d[e];let n={portName:"",portWidth:""};if(""!=t)switch(n.portName=t.replace(/(,|;)/,""),null==u.groups.width?n.portWidth=" ":n.portWidth=u.groups.width,u.groups.type){case"inout":o.port.inout.push(n);break;case"in":o.port.input.push(n);break;case"out":o.port.output.push(n)}}break;case l:if("parameter"==u.groups.type){let e={paramName:"",paramWidth:"",paramInit:""};e.paramName=u.groups.name,e.paramWidth=u.groups.width,e.paramInit=u.groups.init,o.param.push(e)}break;case a:let e={instModule:"",instModPath:"",instName:""};e.instModule=u.groups.type,e.instName=u.groups.name,o.instmodule.push(e)}}}}t.getFileParam=function(e,t,n=0,a,l,c){let u=e.getText(),d=function(e,t){let n=[],i=h;for(let r=0;r<i.length;r++)for(;;){let o=i[r].exec(e);if(null==o)break;let s={start:0,end:0};s.start=o.index+t,s.end=o.index+o[0].length+t,n.push(s)}return n}(u,n);for(u=function(e){let t=e.match(o);if(null!=t)for(let n=0;n<t.length;n++){const i=t[n],r=i.replace(/\S/g," ");e=e.replace(i,r)}if(t=e.match(r),null!=t)for(let n=0;n<t.length;n++){const i=t[n],r=i.replace(/\S/g," ");e=e.replace(i,r)}return e}(u),null!=c&&(c.symbols=[]);;){let r=s.exec(u);if(null==r)break;if(0==r.index&&null!=a||i.isIllegalRange(r,d,n))continue;if(null!=c){let t=c.setSymbolInformation(r,a,e,n);c.symbols.push(t)}let o={moduleName:"",modulePath:"",instmodule:[],param:[],port:{inout:[],input:[],output:[]}};"symbol"==t&&(o=null),p(r[0],e,r.groups.name,d,o,r.index+n,c),"symbol"!=t&&(o.moduleName=r.groups.name,o.modulePath=e.uri._fsPath.replace(/\\/g,"/"),l.push(o))}return null!=c?c.symbols:void 0}},41:(e,t,n)=>{"use strict";const i=n(844);var r=new RegExp([/\/\/.*/].map((e=>"string"==typeof e?e:e.source)).join(""),"mg"),o=new RegExp([/\/\*[\s\S]*?\*\//].map((e=>"string"==typeof e?e:e.source)).join(""),"mg"),s=new RegExp(["(?<=^\\s*",/(?<type>module|program|interface|package|primitive|config|property)\s+/,/(?:automatic\s+)?/,")",/(?<name>\w+)/,/(?<params>\s*#\s*\([\w\W]*?\))?/,/(?<ports>\s*\([\W\w]*?\))?/,/\s*;/,/(?<body>[\W\w]*?)/,/(?<end>end\1)/].map((e=>"string"==typeof e?e:e.source)).join(""),"mg"),a=new RegExp(["(?<=^\\s*(virtual\\s+)?",/(?<type>class)\s+/,")",/(?<name>\w+)/,/(\s+(extends|implements)\s+[\w\W]+?|\s*#\s*\([\w\W]+?\))*?/,/\s*;/,/(?<body>[\w\W]*?)/,/(?<end>endclass)/].map((e=>"string"==typeof e?e:e.source)).join(""),"mg"),l=new RegExp(["(?<=^\\s*(virtual|local|extern|pure\\s+virtual)?\\s*",/(?<type>(function|task))\s+/,/((?<return>\[.+?\])\s+)?/,")",/\b(?<name>[\w\.]+)\b\s*/,/(?<ports>\([\W\w]*?\))?/,/\s*;/,/(?<body>[\w\W]*?)/,/(?<end>end(function|task))/].map((e=>"string"==typeof e?e:e.source)).join(""),"mg"),c=new RegExp([/\b(?<type>begin)\b/,/\s*:\s*/,/(?<name>\w+)\s*(?:\/\/.*)?$/,/(?<body>(?:\bbegin\b(?:\bbegin\b(?:\bbegin\b(?:\bbegin\b(?:\bbegin\b[\w\W]+?\bend\b|[\w\W])+?\bend\b|[\w\W])+?\bend\b|[\w\W])+?\bend\b|[\w\W])+?\bend\b|[\w\W])+?)/,/\bend\b(\s*:\s*\1)?/].map((e=>e.source)).join(""),"mg"),u=new RegExp([/(?<=^\s*(?<name>\w+)\s*:\s*)/,/(?<type>assert\b)/].map((e=>"string"==typeof e?e:e.source)).join(""),"mg"),h=new RegExp([/(?:(?<modifier>virtual|static|automatic|rand|randc|pure virtual)\s+)?/,/\b(?<type>[:\w]+)\s*/,/(?<params>#\s*\(\s*\.[\w\W]*?\))?\s*/,/(\b\w+\s*,\s*)*?/,/\b(?<name>\w+)\s*/,/(?:(\(\s*\.[\w\W]*?\)))\s*/,/\s*(?<end>;)/].map((e=>"string"==typeof e?e:e.source)).join(""),"mg"),p=new RegExp([/(?<!(input\s|output\s|inout\s))/,/(?<type>parameter|localparam|reg|wire|bit|int|char|float|integer)\s+/,/(signed\s|unsigned\s)?\s*/,/(?<width>\[.+?\]\s)?\s*/,/(?<name>\w+)/,/(?<depth>\[.+?\]\s)?\s*/,/(=\s)?\s*(?<init>.+)?\s*/,/(,|\)|;)/].map((e=>e.source)).join(""),"mgi"),d=new RegExp([/(?<type>input|output|inout)\s+/,/(wire\s|reg\s)?\s*(signed\s|unsigned\s)?\s*/,/(?<width>\[.+?\]\s)?\s*/,/(?<name>(\w+(,|;)?)+)/,/(=([0-9]+'(b|d|x))?[0-9]+)?\s*/,/(,|\)|;)/].map((e=>e.source)).join(""),"mgi"),m=new RegExp([/(?<=^\s*)/,/(?<type>typedef)\s+/,/(?<body>[^;]*)/,/(?<name>\b\w+)/,/\s*(\[[^;]*?\])*?/,/\s*(?<end>;)/].map((e=>e.source)).join(""),"mg"),g=new RegExp([/(?<=^\s*)/,/`(?<type>define)\s+/,/(?<name>\w+)\b/,/((?<ports>\([^\n]*\))|\s*?)/,/(?<body>([^\n]*\\\n)*([^\n]*))/,/(?<!\\)(?=\n)/].map((e=>e.source)).join(""),"mg"),f=[a,l,c],w=[d,p,h,u,m,g],v=[r,o];function P(e,t,n,r,o,s){let a=[];e||(e=t.getText());for(let l=0;l<f.length;l++){const c=f[l];for(;;){let l=c.exec(e);if(null==l)break;if(0==l.index&&null==n||i.isIllegalRange(l,r,o))continue;if(null!=s){let e=s.setSymbolInformation(l,n,t,o);s.symbols.push(e)}let u={start:0,end:0};u.start=l.index+o,u.end=l.index+l[0].length+o,a.push(u),b(l[0],t,l.groups.name,r,null,u.start,s)}}return a}function b(e,t,n,r,o,s,a){e||(e=t.getText());for(let u=0;u<w.length;u++)for(var l=w[u];;){let u=l.exec(e);if(null==u)break;if(!(0==u.index&&null!=n||i.isIllegalRange(u,r,s))){if(null!=a)if(l==d){var c=u.groups.name.split(",");for(let e=0;e<c.length;e++)if(u.groups.name=c[e],""!=u.groups.name){u.groups.name=u.groups.name.replace(/(,|;)/,"");let e=a.setSymbolInformation(u,n,t,s);a.symbols.push(e)}}else{let e=a.setSymbolInformation(u,n,t,s);a.symbols.push(e)}if(null!=o)switch(l){case d:for(let e=0;e<c.length;e++){const t=c[e];let n={portName:"",portWidth:""};if(""!=t)switch(n.portName=t.replace(/(,|;)/,""),null==u.groups.width?n.portWidth=" ":n.portWidth=u.groups.width,u.groups.type){case"inout":o.port.inout.push(n);break;case"input":o.port.input.push(n);break;case"output":o.port.output.push(n)}}break;case p:if("parameter"==u.groups.type){let e={paramName:"",paramWidth:"",paramInit:""};e.paramName=u.groups.name,e.paramWidth=u.groups.width,e.paramInit=u.groups.init,o.param.push(e)}break;case h:let e={instModule:"",instModPath:"",instName:""};e.instModule=u.groups.type,e.instName=u.groups.name,o.instmodule.push(e)}}}}t.getFileParam=function(e,t,n=0,a,l,c){let u=e.getText(),h=function(e,t){let n=[],i=v;for(let r=0;r<i.length;r++)for(;;){let o=i[r].exec(e);if(null==o)break;let s={start:0,end:0};s.start=o.index+t,s.end=o.index+o[0].length+t,n.push(s)}return n}(u,n);for(u=function(e){let t=e.match(o);if(null!=t)for(let n=0;n<t.length;n++){const i=t[n],r=i.replace(/\S/g," ");e=e.replace(i,r)}if(t=e.match(r),null!=t)for(let n=0;n<t.length;n++){const i=t[n],r=i.replace(/\S/g," ");e=e.replace(i,r)}return e}(u),null!=c&&(c.symbols=[]);;){let r=s.exec(u);if(null==r)break;if(!(0==r.index&&null!=a||i.isIllegalRange(r,h,n))){if(null!=c){let t=c.setSymbolInformation(r,a,e,n);c.symbols.push(t)}if(h=h.concat(P(r[0],e,r.groups.name,h,r.index+n,c)),"module"==r.groups.type){let i={moduleName:"",modulePath:"",instmodule:[],param:[],port:{inout:[],input:[],output:[]}};"symbol"==t&&(i=null),b(r[0],e,r.groups.name,h,i,r.index+n,c),"symbol"!=t&&(i.moduleName=r.groups.name,i.modulePath=e.uri._fsPath.replace(/\\/g,"/"),l.push(i))}}}return null!=c?c.symbols:void 0}},862:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};const r=n(549),o=n(844),s=n(41),a=n(743);t.simParser=o,t.vlogParser=s,t.vhdlParser=a;class l{constructor(){this.symbols=[]}setSymbolInformation(e,t,n,i){let o=new r.Location(n.uri,new r.Range(n.positionAt(e.index+i),n.positionAt(e.index+e[0].length+i)));return r.SymbolInformation(e.groups.name,this.getSymbolKind(e.groups.type),t,o)}getSymbolKind(e){if(void 0===e||""===e)return r.SymbolKind.Variable;if(-1!=e.indexOf("["))return r.SymbolKind.Array;switch(e){case"module":return r.SymbolKind.Module;case"package":case"import":return r.SymbolKind.Package;case"program":return r.SymbolKind.Module;case"begin":return r.SymbolKind.Operator;case"task":return r.SymbolKind.Method;case"function":return r.SymbolKind.Function;case"assert":return r.SymbolKind.Variable;case"event":return r.SymbolKind.Event;case"time":case"define":case"typedef":return r.SymbolKind.TypeParameter;case"generate":return r.SymbolKind.Operator;case"enum":return r.SymbolKind.Enum;case"modport":return r.SymbolKind.Boolean;case"property":return r.SymbolKind.Property;case"interface":return r.SymbolKind.Interface;case"parameter":case"localparam":return r.SymbolKind.TypeParameter;case"integer":case"char":case"float":case"int":return r.SymbolKind.Number;case"string":return r.SymbolKind.String;case"struct":return r.SymbolKind.Struct;case"class":return r.SymbolKind.Class;case"logic":return r.SymbolKind.Boolean;case"wire":case"reg":return r.SymbolKind.Constant;case"bit":return r.SymbolKind.Boolean;default:return r.SymbolKind.Field}}}t.HDLSymbol=l,t.indexer=class{constructor(e,t){this.NUM_FILES=250,this.building=!1,this.statusbar=e,this.HDLparam=t,this.HDLSymbol=new l,this.symbols=new Map,this.symbolsCount=0,this.settings=r.workspace.getConfiguration(),this.getConfig(),r.workspace.onDidChangeConfiguration((function(){this.getConfig()}))}getConfig(){this.parallelProcessing=this.settings.get("HDL.parallelProcessing")}getFileParam(e,t,n=0,i,r,o){let l;return"systemverilog"==e.languageId||"verilog"==e.languageId?l=s.getFileParam(e,t,n,i,r,o):"vhdl"==e.languageId&&(l=a.getFileParam(e,t,n,i,r,o)),l}processFile(e,t=0,n){return i(this,void 0,void 0,(function*(){return new Promise((t=>i(this,void 0,void 0,(function*(){t(r.workspace.openTextDocument(e).then((e=>this.getFileParam(e,null,0,null,n,this.HDLSymbol))))})))).then((n=>{n.length>0&&(this.symbols.has(e.fsPath)?this.symbolsCount+=n.length-this.symbols.get(e.fsPath).length:this.symbolsCount+=n.length,this.symbols.set(e.fsPath,n),0==t&&(this.statusbar.text="HDL: "+this.symbolsCount+" indexed objects"))})).catch((t=>{this.symbols.has(e.fsPath)&&(this.symbolsCount-=this.symbols.get(e.fsPath).length,this.symbols.delete(e.fsPath))}))}))}build_index(e){return i(this,void 0,void 0,(function*(){var t=!1;return this.building=!0,this.symbolsCount=0,this.statusbar.text="HDL: Indexing..",yield r.window.withProgress({location:r.ProgressLocation.Window,title:"HDL Indexing...",cancellable:!0},((n,r)=>i(this,void 0,void 0,(function*(){this.symbols=new Map;for(var n=0;n<e.length;n+=this.parallelProcessing){let i=e.slice(n,n+this.parallelProcessing);if(r.isCancellationRequested){t=!0;break}yield Promise.all(i.map((t=>this.processFile(t,e.length,this.HDLparam))))}})))).then((()=>{this.building=!1,o.refreshInstModulePath(this.HDLparam),this.statusbar.text=t?"HDL: Indexing cancelled":"HDL: "+this.symbolsCount+" indexed objects"}))}))}addDocumentSymbols(e){return new Promise((t=>i(this,void 0,void 0,(function*(){e&&this.symbols&&(client_1.isSystemVerilogDocument(e)||client_1.isVerilogDocument(e))?t(vscode_1.workspace.openTextDocument(e.uri).then((e=>this.parser.get_all_recursive(e,"declaration",1)))):t(new Array)})))).then((t=>(t.length>0&&this.symbols.set(e.uri.fsPath,t),t.length)))}removeDocumentSymbols(e){if(!e||!this.symbols)return 0;let t=0;return this.symbols.has(e)&&(t=this.symbols.get(e).length,this.symbols.delete(e)),-1*t}updateMostRecentSymbols(e){if(this.mostRecentSymbols){if(!e)return;for(;e.length>0;){let t=e.pop();for(let e=0;e<this.mostRecentSymbols.length;e++)if(this.mostRecentSymbols[e]==t){this.mostRecentSymbols.splice(e,1);break}this.mostRecentSymbols.length>=this.NUM_FILES&&this.mostRecentSymbols.pop(),this.mostRecentSymbols.unshift(t)}}else{let e=new Array;for(var t of this.symbols.values()){if(e.length+t.length>=this.NUM_FILES){let n=this.NUM_FILES-e.length;e=e.concat(t.slice(-1*n));break}e=e.concat(t)}this.mostRecentSymbols=e}}}},810:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(s,a)}l((i=i.apply(e,t||[])).next())}))};const r=n(747),o=n(622),s=n(549),a=n(129),l=n(444),c=(n(862),n(406));function u(e){let t=!1;return s.window.terminals.forEach((n=>{n.name==e&&(t=!0)})),t}t.fpgaRegister=class{constructor(e,t){this.StartFPGA=null,this.currentState=!1,this.context=e,this.opeParam=t;var n=this;this.prjParam=l.prjs.refreshPrjInfo(this.opeParam),s.window.onDidCloseTerminal((function(e){"StartFPGA"==e.name&&(n.currentState=!1,c.move_bd_IP(t),s.window.showInformationMessage("Terminal Closed, name: "+e.name))}))}Launch(){if(""!=this.opeParam.propertyPath)this.prjParam=l.prjs.refreshPrjInfo(this.opeParam),l.prjs.refreshPrjFolder(this.opeParam),u("StartFPGA")||(this.StartFPGA=s.window.createTerminal({name:"StartFPGA"})),this.currentState||(this.StartFPGA.show(!0),"xilinx"==this.prjParam.FPGA_VERSION&&this.StartFPGA.sendText(`vivado -mode tcl -s ${this.opeParam.rootPath}/../resources/tool/Xilinx/Script/Vivado/Run.tcl -notrace -nolog -nojournal`),this.currentState=!0);else{let e=l.files.pickFile(this.opeParam.workspacePath,".xpr");if(0!=e.length){let t=`vivado -mode gui -s ${this.opeParam.workspacePath}${e[0]} -notrace -nolog -nojournal`;a.exec(t,((e,t,n)=>{null!==e?s.window.showErrorMessage(n):s.window.showInformationMessage("GUI open successfully")}))}}}Refresh(){1==this.currentState&&(this.StartFPGA.show(!0),this.StartFPGA.sendText("refresh"))}Top(e){1==this.currentState&&"xilinx"==this.prjParam.FPGA_VERSION&&c.setTopFile(e,(e=>{this.StartFPGA.sendText(e)}))}Simulation(){1==this.currentState&&(this.currentState=!1,this.StartFPGA.show(!0),this.StartFPGA.sendText("sim"))}Build(){1==this.currentState&&(this.StartFPGA.show(!0),this.StartFPGA.sendText("build"))}Synth(){1==this.currentState&&(this.StartFPGA.show(!0),this.StartFPGA.sendText("synth"))}Impl(){1==this.currentState&&(this.StartFPGA.show(!0),this.StartFPGA.sendText("impl"))}Gen_Bit(){1==this.currentState&&(this.StartFPGA.show(!0),this.StartFPGA.sendText("bits"))}Program(){1==this.currentState&&(this.StartFPGA.show(!0),this.StartFPGA.sendText("program"))}GUI(){1==this.currentState?(this.currentState=!1,this.StartFPGA.sendText("gui"),this.StartFPGA.hide()):(this.prjParam=l.prjs.refreshPrjInfo(this.opeParam),l.prjs.refreshPrjFolder(this.opeParam),u("StartFPGA")||(this.StartFPGA=s.window.createTerminal({name:"StartFPGA"})),this.StartFPGA.show(!0),this.currentState=!1,"xilinx"==this.prjParam.FPGA_VERSION&&this.StartFPGA.sendText(`vivado -mode gui -s ${this.opeParam.rootPath}/../resources/tool/Xilinx/Script/Vivado/Run.tcl -notrace -nolog -nojournal`))}Exit(){this.currentState=!1,this.StartFPGA.show(!0),this.StartFPGA.sendText("exit"),c.move_bd_IP(this.opeParam)}},t.synthNetlist=class{constructor(e,t){this.panel=void 0,this.context=e,this.opeParam=t}open_viewer(){return i(this,void 0,void 0,(function*(){this.create_viewer()}))}create_viewer(){return i(this,void 0,void 0,(function*(){this.panel=s.window.createWebviewPanel("netlist_viewer","Schematic viewer",s.ViewColumn.Two,{enableScripts:!0}),this.panel.onDidDispose((()=>{this.panel=void 0}),null,this.context.subscriptions),this.panel.webview.onDidReceiveMessage((e=>{switch(e.command){case"export":return void this.export_as(e.type,e.svg);case"html_loaded":return void this.update_viewer_last_code()}}),void 0,this.context.subscriptions);let e=this.getWebviewContent(this.context);this.panel.webview.html=e;let t=yield this.get_code(void 0);void 0!==t&&(this.code=t)}))}show_export_message(e){s.window.showInformationMessage(`Schematic saved in ${e} ðŸ˜Š`)}export_as(e,t){return i(this,void 0,void 0,(function*(){if("svg"===e){let e={svg:["svg"]};s.window.showSaveDialog({filters:e}).then((e=>{if(void 0!==(null==e?void 0:e.path)){let n=this.normalize_path(null==e?void 0:e.path);r.writeFileSync(n,t),this.show_export_message(n)}}))}else console.log("Error export documentation.")}))}normalize_path(e){return"/"===e[0]&&"win32"===n(87).platform()?e.substring(1):e}send_code(e){var t;return i(this,void 0,void 0,(function*(){let n=this.document.fileName;void 0!==e&&(yield null===(t=this.panel)||void 0===t?void 0:t.webview.postMessage({command:"update",code:e,filename:n}))}))}get_code(e){return i(this,void 0,void 0,(function*(){let t=e;if(void 0===e){let e=s.window.activeTextEditor;if(!e)return;t=e.document}let n=t.languageId,i=t.getText();if("verilog"===n||"systemverilog"===n)return this.document=t,i}))}update_viewer(){return i(this,void 0,void 0,(function*(){if(void 0!==this.panel){let e=yield this.get_code(void 0);this.code=e,yield this.send_code(e)}}))}update_viewer_last_code(){return i(this,void 0,void 0,(function*(){void 0!==this.panel&&(yield this.send_code(this.code))}))}update_visible_viewer(e){return i(this,void 0,void 0,(function*(){if(1!==e.length)return;let t=e[0].document;if(void 0!==this.panel){let e=yield this.get_code(t);this.code=e,yield this.send_code(e)}}))}getWebviewContent(){const e=o.dirname(`${this.opeParam.rootPath}`)+o.sep+"resources"+o.sep+"synth"+o.sep+"netlist_viewer.html",t=o.dirname(e);let n=r.readFileSync(e,"utf-8");return n=n.replace(/(<link.+?href="|<script.+?src="|<img.+?src=")(.+?)"/g,((e,n,i)=>n+s.Uri.file(o.resolve(t,i)).with({scheme:"vscode-resource"}).toString()+'"')),n}}},406:(e,t,n)=>{"use strict";const i=n(747),r=n(549),o=n(129),s=n(444);async function a(e){let t=s.files.pickFile(e,".bit");if(0!=t.length)return 1==t.length?"\t"+e+t[0]+"\n":await r.window.showQuickPick(t).then((t=>{if(t)return"\t"+e+t+"\n"}));r.window.showWarningMessage("The bit filesys.files was not found\nThe elf filesys.dirs was generated as a bin filesys.dirs")}async function l(e){let t=function(e){let t=s.files.pickFile(e,".elf");return t=t.filter((function(e){return"fsbl.elf"!==e})),t}(e);if(0!=t.length)return 1==t.length?"\t"+e+t[0]+"\n":await r.window.showQuickPick(t).then((t=>{if(t)return"\t"+e+t+"\n"}));r.window.showWarningMessage("The elf filesys.files was not found\nThe elf filesys.dirs was generated as a bin filesys.dirs")}t.Add_bd=function(e){let t=this.json.pullJsonInfo(`${e.rootPath}/../property.json`),n=r.workspace.getConfiguration().get("PRJ.xilinx.BD.repo.path");""==n&&(n=`${e.rootPath}/../resources/tool/Xilinx/IP/Example_bd/`),r.window.showInputBox({password:!1,ignoreFocusOut:!0,placeHolder:"Please input the name of bd_file"}).then((function(i){let o=t.properties.SOC_MODE.properties.bd_file.enum;if(o.find((function(e){return e!==i}))){o.push(i),this.json.pushJsonInfo(`${e.rootPath}/../property.json`,t);const s=n+i+".bd";this.file.writeFile(s,"\n\n"),r.window.showInformationMessage(`generate the ${i} successfully!!!`);const a={preview:!1,viewColumn:r.ViewColumn.Active};r.window.showTextDocument(r.Uri.file(s),a)}else r.window.showWarningMessage(`The ${i} already exists`)}))},t.Delete_bd=function(e){let t=this.json.pullJsonInfo(`${e.rootPath}/../property.json`);r.window.showQuickPick(this.file.pick_file(`${e.rootPath}/../resources/tool/Xilinx/IP/Example_bd`,".bd")).then((n=>{if(!n)return;let i=t.properties.SOC_MODE.properties.bd_file.enum;for(var o=0;o<i.length;o++)n==i[o]+".bd"&&i.splice(o,1);this.json.pushJsonInfo(`${e.rootPath}/../property.json`,t);const s=`${e.rootPath}/../resources/tool/Xilinx/IP/Example_bd/`+n;this.file.deleteFile(s),r.window.showInformationMessage(`delete the ${n} successfully!!!`)}))},t.Overwrite_bd=function(e){r.window.showQuickPick(this.file.pick_file(`${e.rootPath}/../resources/tool/Xilinx/IP/Example_bd`,".bd")).then((t=>{if(!t)return;const n=`${e.rootPath}/../resources/tool/Xilinx/IP/Example_bd/`+t,i={preview:!1,viewColumn:r.ViewColumn.Active};r.window.showTextDocument(r.Uri.file(n),i)}))},t.move_bd_IP=function(e){let t=s.files.pullJsonInfo(e.propertyPath),n="",r=`${e.workspacePath}prj/xilinx/${t.PRJ_NAME.FPGA}.srcs/sources_1/ip`,o=`${e.workspacePath}prj/xilinx/${t.PRJ_NAME.FPGA}.srcs/sources_1/bd`;n="none"==t.SOC_MODE.soc?`${e.workspacePath}user`:`${e.workspacePath}user/Hardware`,i.existsSync(r)&&i.readdirSync(r).forEach((e=>{s.dirs.movedir(`${r}/${e}`,`${n}/IP`)})),i.existsSync(o)&&i.readdirSync(o).forEach((e=>{s.dirs.movedir(`${o}/${e}`,`${n}/bd`)}))},t.setTopFile=function(e,t){let n=r.window.activeTextEditor;if(!n)return null;let i="[current_fileset]";-1!=n.document.fileName.replace(/\\/g,"/").replace("//","/").indexOf("sim")&&(i="[get_filesets sim_1]");let o=[];e.HDLparam.forEach((e=>{e.modulePath==n.document.fileName.replace(/\\/g,"/").replace("//","/")&&o.push(e.moduleName)})),null==o?r.window.showWarningMessage("there is no module here"):o.length>1?r.window.showQuickPick(o).then((e=>{e&&t(`set_property top ${e} ${i}`)})):t(`set_property top ${o[0]} ${i}`)},t.generateBootFile=function(e){let t={outside_folder:`${e.workspacePath}user/BOOT`,inside_folder:`${e.rootPath}/../resources/tool/Xilinx/BOOT`,output_path:`${e.rootPath}/../resources/tool/Xilinx/BOOT`,elf_path:"",bit_path:"",fsbl_path:""},n="//arch = zynq; split = false; format = BIN\n";n+="the_ROM_image:\n",n+="{\n",t.fsbl_path=function(e){let t="";return t=i.existsSync(`${e.workspacePath}user/BOOT/fsbl.elf`)?`\t[bootloader]${e.workspacePath}user/BOOT/fsbl.elf\n`:`\t[bootloader]${e.rootPath}/../resources/tool/Xilinx/BOOT/fsbl.elf\n`,t}(e),i.existsSync(t.outside_folder)?(t.bit_path=a(t.outside_folder),t.elf_path=l(t.outside_folder)):(t.bit_path=a(t.inside_folder),t.elf_path=l(t.inside_folder)),n+=t.fsbl_path+t.bit_path+t.elf_path+"}",i.writeFileSync(`${t.output_path}/output.bif`,n);let s=`bootgen -arch zynq -image ${t.output_path}/output.bif -o ${e.workspacePath}BOOT.bin -w on`;o.exec(s,(function(e,t,n){if(e)return r.window.showErrorMessage(`${e}`),void r.window.showErrorMessage(`stderr: ${n}`)}))}},274:(e,t,n)=>{"use strict";const i=n(549),r=n(129);t.toolRegister=class{constructor(e){this.opeParam=e,this.setting=i.workspace.getConfiguration(),this.getConfig(),i.workspace.onDidChangeConfiguration((function(){this.getConfig()}))}getConfig(){this.Parity=this.setting.get("TOOL.SerialPortMonitor.Parity"),this.BaudRate=this.setting.get("TOOL.SerialPortMonitor.BaudRate"),this.DataBits=this.setting.get("TOOL.SerialPortMonitor.DataBits"),this.StopBits=this.setting.get("TOOL.SerialPortMonitor.StopBits")}serialPortTerminal(e,t){if(this.terminal.ensureTerminalExists(`${e}`))i.window.showWarningMessage("This serial port number is in use!");else{let n=i.window.createTerminal({name:`${e}`});n.show(!0),n.sendText(t)}}runSerialPort(e){r.exec(e,(function(e,t,n){let r=t.replace(/\s*/g,"").split("-"),o=`${BaudRate} ${DataBits} ${StopBits} ${Parity}`;if("none"==r[0]&&i.window.showWarningMessage("Not found any serial port !"),"one"==r[0]){o=r[1]+" "+o;let e=`python ${this.opeParam.rootPath}/../resources/tool/.Script/Serial_Port.py runthread ${o}`;this.serialPortTerminal(r[1],e)}"multiple"==r[0]&&(r.splice(0,1),i.window.showQuickPick(r).then((e=>{if(!e)return;o=e+" "+o;let t=`python ${this.opeParam.rootPath}/../resources/tool/.Script/Serial_Port.py runthread ${o}`;this.serialPortTerminal(e,t)}))),null!==e&&i.window.showErrorMessage(e)}))}genBootLoadFile(){}clean(){}serialPort(){let e=`python ${this.opeParam.rootPath}/../resources/tool/.Script/Serial_Port.py getCurrentPort`;runSerialPort(e,this.opeParam.rootPath)}}},938:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};const r=n(549),o=n(470),s=n(763),a=n(810),l=n(274),c=n(406),u=n(826),h=n(61),p=n(766),d=n(357),m=n(231),g=n(556);t.tree=s,t.build=a,t.xilinx=c,t.lspAlignment=u,t.lspProvider=h,t.lspCompletion=p,t.simulation=d,t.simInstance=m,t.simTestbench=g,t.registerLspServer=function(e,t,n){e.subscriptions.push(r.commands.registerCommand("TOOL.alignment",u.smartIndent));const i=[{scheme:"file",language:"systemverilog"},{scheme:"file",language:"verilog"},{scheme:"file",language:"vhdl"}];r.languages.setLanguageConfiguration(i[2].language,{indentationRules:{increaseIndentPattern:/^.*(begin|then|loop|is)$/,decreaseIndentPattern:/^end\s+\w*$/},wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\#\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g}),r.languages.registerCompletionItemProvider(i[2],new p.vhdlCompletion,[".",'"']),r.languages.registerCompletionItemProvider(i[1],n,"."),r.languages.registerCompletionItemProvider({scheme:"file",language:"json"},new p.jsonCompletion,"/");const o=new h.HoverProvider,s=new h.numberHoverProvider,a=new h.DocumentSymbolProvider(t),l=new h.WorkspaceSymbolProvider(t),c=new h.DefinitionProvider(l);e.subscriptions.push(r.languages.registerHoverProvider(i,o)),e.subscriptions.push(r.languages.registerHoverProvider(i,s)),e.subscriptions.push(r.languages.registerWorkspaceSymbolProvider(l)),e.subscriptions.push(r.languages.registerDefinitionProvider(i,c)),e.subscriptions.push(r.languages.registerDocumentSymbolProvider(i,a))},t.registerSimServer=function(e,t){var n=new d.iverilogSimulate(t);r.commands.registerCommand("TOOL.simulate",(()=>{n.simulate(e)})),r.commands.registerCommand("TOOL.instance",(()=>{m.instantiateModuleInteract(e)})),r.commands.registerCommand("TOOL.testbench",(()=>{g.genInstancetoTbFile(e)})),r.commands.registerCommand("TOOL.Generate_tb",(()=>{d.generatetbFile(t)})),r.commands.registerCommand("TOOL.Overwrite_tb",(()=>{d.Overwrite_tb(t)}))},t.registerTreeServer=function(e){r.window.registerTreeDataProvider("TOOL.sdk_tree",new s.sdkTreeDataProvider(e)),r.window.registerTreeDataProvider("TOOL.fpga_tree",new s.fpgaTreeDataProvider(e)),r.window.registerTreeDataProvider("TOOL.Tool_tree",new s.toolTreeDataProvider(e))},t.registerBuildServer=function(e,t,n){let o=new a.synthNetlist(e,n);e.subscriptions.push(r.commands.registerCommand("FPGA.netlist",(()=>i(this,void 0,void 0,(function*(){yield o.open_viewer()})))),r.workspace.onDidOpenTextDocument((e=>o.update_viewer())),r.workspace.onDidSaveTextDocument((e=>o.update_viewer())),r.window.onDidChangeVisibleTextEditors((e=>o.update_visible_viewer(e))));let s=new a.fpgaRegister(e,n);r.commands.registerCommand("FPGA.Launch",(()=>{s.Launch()})),r.commands.registerCommand("FPGA.Refresh",(()=>{s.Refresh()})),r.commands.registerCommand("FPGA.Top",(()=>{s.Top(t)})),r.commands.registerCommand("FPGA.Simulate",(()=>{s.Simulation()})),r.commands.registerCommand("FPGA.Build",(()=>{s.Build()})),r.commands.registerCommand("FPGA.Synth",(()=>{s.Synth()})),r.commands.registerCommand("FPGA.Impl",(()=>{s.Impl()})),r.commands.registerCommand("FPGA.Gen_Bit",(()=>{s.Gen_Bit()})),r.commands.registerCommand("FPGA.Program",(()=>{s.Program()})),r.commands.registerCommand("FPGA.GUI",(()=>{s.GUI()})),r.commands.registerCommand("FPGA.Exit",(()=>{s.Exit()}))},t.registerDebugDesigner=function(e){let t=new l.toolRegister(e);r.commands.registerCommand("TOOL.SerialPort",(()=>{t.serialPort()}))},t.registerSocDesigner=function(e){let t=new o.socRegister(e);r.commands.registerCommand("SDK.Launch",(()=>{t.SDK_Launch()})),r.commands.registerCommand("SDK.Build",(()=>{t.SDK_Build()})),r.commands.registerCommand("SDK.Download",(()=>{t.SDK_Download()}))},t.registerXilinxDesigner=function(e){r.commands.registerCommand("FPGA.Overwrite_bd",(()=>{c.Overwrite_bd(e)})),r.commands.registerCommand("FPGA.Add_bd",(()=>{c.Add_bd(e)})),r.commands.registerCommand("FPGA.Delete_bd",(()=>{c.Delete_bd(e)}))}},826:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(549);function o(e){for(var t=0;t<e.length&&-1!=[" ","\t","\n"].indexOf(e[t]);++t);let n=t;return Math.ceil(n/2)}function s(e,t){return e.replace(/^\s*/," ".repeat(2*t))}function a(e){return e.replace(/\/\/.*$/,"")}function l(e){return e.replace(/\/\/.*$/,""),0!=e.replace(/\s+/,"").length}function c(e){e=a(e);return!!/\b(always|always_ff|always_comb|always_latch|if|else|for|while|do)\b/.test(e)&&!/\bbegin\b/.test(e)&&!/;/.test(e)}function u(e){e=a(e);let t,n=/(\(|{|\[)/g,i=/(\)|}|\])/g,r=/\b(begin|function|task|module|package|case)\b/.test(e)?1:0,o=/\b(end|endfunction|endtask|endmodule|endpackage|endcase)\b/.test(e)?1:0,s=0;for(;null!==(t=n.exec(e));)++s;let l=0;for(;null!==(t=i.exec(e));)++l;return[r-o,s-l]}function h(e){return/\bend\b/.test(e)?["end","begin"]:/\belse\b/.test(e)?["else","if"]:/\bendcase\b/.test(e)?["endcase","case"]:/\bendfunction\b/.test(e)?["endfunction","function"]:/\bendtask\b/.test(e)?["endtask","task"]:/\bendmodule\b/.test(e)?["endmodule","module"]:/\bendpackage\b/.test(e)?["endpackage","package"]:null}function p(e,t){let n,i=new RegExp("\\b"+t+"\\b","g"),r=0;for(;null!==(n=i.exec(e));)++r;return r}function d(e,t,n){let i,r="else"==n[0],o=0,s=0,a=0;for(i=t-1;i>=0;--i){let t=e.lineAt(i).text;if(r){let[e,n]=u(t);if(s+=e,a+=n,s<0||a<0)continue}if(o-=p(t,n[0]),o+=p(t,n[1]),o>0)break}return i}function m(e,t){let n,i=0,r=0,s=0,p=!1,m=!1,g=a(e.lineAt(t).text),f=h(g);if(null!=f)s=d(e,t,f),p=!1;else for(n=t-1;n>=0;--n){let t=a(e.lineAt(n).text),[o,h]=u(t);if(i+=o,r+=h,!(i<0||r<0)){if(c(t)&&!m){s=n,p=!0;break}if(i>=1||r>=1){s=n,p=!1;break}l(t)&&(m=!0)}}if(n<0)return 0;let w,v=o(e.lineAt(s).text);return w=null==f?/^\s*begin\b/.test(g)?p?v:v+1:/^\s*[\}\)\]]/.test(g)?v:v+1:v,w}t.test_smart_indent=function(e){return e},t.getIndentLevel=o,t.changeIndent=s,t.removeLineComment=a,t.isValidLine=l,t.analyzeSingleIndentKeys=c,t.analyzeBlockIndentKeys=u,t.getIndentPair=h,t.countKey=p,t.countPunc=function(e,t,n){let i,r=new RegExp(t),o=new RegExp(n),s=0,a=0;for(;null!==(i=r.exec(e));)++s;for(;null!==(i=o.exec(e));)++a;return[s,a]},t.findIndentPair=d,t.analyzeIndentLevelBackward=m;class g{constructor(){this.type="general",this.broken=!1,this.indent=-1,this.posMod=-1,this.posSig=-1,this.posVec=-1,this.posRst=-1,this.posAss=-1,this.modifier="",this.signal="",this.vector="",this.rest=""}}function f(e){let t,n=new g,i=a(e),r=0;return n.broken=!/;/.test(e),(t=/^\s+/.exec(i))&&(n.indent=t[0].length,i=i.slice(t[0].length,i.length),r+=t[0].length),(t=/^\b(input|output|inout)\b/.exec(i))&&(n.type="port",n.posMod=r,n.modifier=t[0],i=i.slice(t[0].length,i.length),r+=t[0].length,(t=/^\s+/.exec(i))&&(i=i.slice(t[0].length,i.length),r+=t[0].length)),(t=/^\b(parameter|localparam)\b/.exec(i))&&(n.type="param",n.posMod=r,n.modifier=t[0],i=i.slice(t[0].length,i.length),r+=t[0].length,(t=/^\s+/.exec(i))&&(i=i.slice(t[0].length,i.length),r+=t[0].length)),(t=/^\b(typedef)\b/.exec(i))&&(n.type="typedef",n.posMod=r,n.modifier=t[0],i=i.slice(t[0].length,i.length),r+=t[0].length,(t=/^\s+/.exec(i))&&(i=i.slice(t[0].length,i.length),r+=t[0].length)),(t=/^\b(wire|reg|logic|bit|int|integer|real|shortreal|string|event|\w+_t)\b(\s+(signed|unsigned))?/.exec(i))&&("general"==n.type&&(n.type="signal"),n.posSig=r,n.signal=t[0],i=i.slice(t[0].length,i.length),r+=t[0].length,(t=/^\s+/.exec(i))&&(i=i.slice(t[0].length,i.length),r+=t[0].length)),"general"!=n.type?((t=/^((?:\[[^\]]+\]\s*)*(?:\[[^\]]+\]\s*?))/.exec(i))&&(n.posVec=r,n.vector=t[0],i=i.slice(t[0].length,i.length),r+=t[0].length,(t=/^\s+/.exec(i))&&(i=i.slice(t[0].length,i.length),r+=t[0].length)),n.posRst=r,n.rest=i):n.broken||(t=/\b(return|if|while|for)\b/.exec(i))||(t=/(<=|\+=|-=|~=|\s=)[^=].+;/.exec(i))&&(n.type="assign",n.posAss=r+t.index),n}function w(e,t){let n=r.window.activeTextEditor,i=n.document,o=n.selections[0].active,s=/\b(begin|function|task|module|package|case)\b/,c=/\b(end|endfunction|endtask|endmodule|endpackage|endcase)\b/,u=/\b(always|always_ff|always_comb|always_latch|if|else|for|while|do)\b/;if("typedef"==t.type&&t.broken)return[o.line,o.line];for(var h=e-1;h>=0;--h){let e=i.lineAt(h).text;if(e=a(e),!l(e))continue;let n=f(e);if("typedef"==t.type&&n.broken)break;if(s.test(e))break;if(c.test(e))break;if(u.test(e))break;if(t.type!=n.type)break}for(var p=e+1;p<i.lineCount;++p){let e=i.lineAt(p).text;if(e=a(e),!l(e))continue;let n=f(e);if("typedef"==t.type&&n.broken)break;if(t.type!=n.type)break;if(s.test(e))break;if(c.test(e))break;if(u.test(e))break}return[h+1,p-1]}function v(e,t,n){return t<=0?n+e:t>=e.length?e+n:e.slice(0,t)+n+e.slice(t,e.length)}function P(e){let t,n=/\b(parameter|localparam)\b/.source,i=/\b(typedef)\b/.source,r=/(signed|unsigned)/.source,o=/\b(wire|reg|logic|bit|int|integer|real|shortreal|\w+_t)\b/.source,s=/((?:\[[^\]]+\]\s*)*(?:\[[^\]]+\]\s*?))/.source;return t=new RegExp(`${/\b(input|output|inout)\b/.source}\\s*`),e=e.replace(t,"$1 "),t=new RegExp(`${n}\\s*`),e=e.replace(t,"$1 "),t=new RegExp(`${i}\\s+`),e=e.replace(t,"$1 "),t=new RegExp(`${o}\\s*(?!;)`),e=e.replace(t,"$1 "),t=new RegExp(`${r}\\s*`),e=e.replace(t,"$1 "),t=new RegExp(`${s}\\s*([^;])`),e.replace(t,"$1 $2")}function b(e){let t=r.window.activeTextEditor,n=(t.document,t.selections[0],[]);for(let t of e){let e=f(t);n.push(e.posSig)}let i=Math.max.apply(null,n);for(let t=0;t<e.length;++t)if(n[t]>=0){let r=i-n[t];r>0&&(e[t]=v(e[t],n[t]," ".repeat(r)))}return e}function y(e){let t=r.window.activeTextEditor,n=(t.document,t.selections[0],[]);for(let t of e){let e=f(t);n.push(e.posVec)}let i=Math.max.apply(null,n);for(let t=0;t<e.length;++t)if(n[t]>=0){let r=i-n[t];r>0&&(e[t]=v(e[t],n[t]," ".repeat(r)))}return e}function x(e){let t=r.window.activeTextEditor,n=(t.document,t.selections[0],[]);for(let t of e){let e=f(t);n.push(e.posRst)}let i=Math.max.apply(null,n);for(let t=0;t<e.length;++t)if(n[t]>=0){let r=i-n[t];r>0&&(e[t]=v(e[t],n[t]," ".repeat(r)))}return e}function S(e){let t=r.window.activeTextEditor,n=(t.document,t.selections[0],[]);for(let t of e){let e=f(t);n.push(e.posAss)}let i=Math.max.apply(null,n);for(let t=0;t<e.length;++t)if(n[t]>=0){let r=i-n[t];r>0&&(e[t]=v(e[t],n[t]," ".repeat(r)))}return e}function _(e){let t,n=r.window.activeTextEditor;n.document,n.selections[0];for(let n=0;n<e.length;++n)if(t=/^(\s*[^\(\)]+?\s*).=[^;]+$/.exec(a(e[n]))){if(/\bparameter\b.+,/.test(e[n]))continue;for(n+=1;n<e.length&&(e[n]=e[n].replace(/^\s+/," ".repeat(t[1].length+3)),!/;/.test(a(e[n])));++n);}return e}function k(e,t){let n=r.window.activeTextEditor,i=n.document,a=n.selections[0].active,l=[];for(let n=e;n<=t;++n){let e=m(i,n),t=s(i.lineAt(n).text,e);l.push(t)}n.edit((function(t){for(let n=0;n<l.length;++n){let o=new r.Position(n+e,0),s=new r.Position(n+e,i.lineAt(n+e).text.length),a=new r.Range(o,s);t.replace(a,l[n])}}));let c=o(i.lineAt(a).text),u=a.character;u<2*c&&(u=2*c);let h=new r.Position(a.line,u);return n.selection=new r.Selection(h,h),!0}function I(e){if(!r.window.activeTextEditor)return void r.window.showInformationMessage("Open files first!");let t=r.window.activeTextEditor,n=t.document,i=t.selections[0],o=(i.active,i.start.line),s=i.end.line,a=[];for(let e=o;e<=s;++e)a.push(n.lineAt(e).text);let l=[];for(let t=0;t<a.length;++t)a[t]=a[t].replace(RegExp(`\\s*(${e})`)," $1"),l.push(a[t].search(RegExp(`${e}`)));let c=Math.max.apply(null,l);for(let e=0;e<a.length;++e)if(l[e]>=0){let t=c-l[e];t>0&&(a[e]=v(a[e],l[e]," ".repeat(t)))}return t.edit((function(e){for(let t=0;t<a.length;++t){let i=new r.Position(t+o,0),s=new r.Position(t+o,n.lineAt(t+o).text.length),l=new r.Range(i,s);e.replace(l,a[t])}})),!0}function D(e){if(!r.window.activeTextEditor)return void r.window.showInformationMessage("Open files first!");let t=r.window.activeTextEditor,n=t.document,i=t.selections[0],o=(i.active,i.start.line),s=i.end.line,a=[];for(let t=o;t<=s;++t){let i,r=/(?:input|output|inout).+\s+(\w+)(;|,)?\s*$/;e?"implicit"==e&&(i=n.lineAt(t).text.replace(r,".$1$2")):i=n.lineAt(t).text.replace(r,".$1 ()$2"),a.push(i)}return t.edit((function(e){for(let t=0;t<a.length;++t){let i=new r.Position(t+o,0),s=new r.Position(t+o,n.lineAt(t+o).text.length),l=new r.Range(i,s);e.replace(l,a[t])}})),console.log(`${e}`),!0}function $(e){if(!r.window.activeTextEditor)return void r.window.showInformationMessage("Open files first!");let t=r.window.activeTextEditor,n=t.document,i=t.selections[0],o=(i.active,i.start.line),s=i.end.line,l=[];for(let t=o;t<=s;++t){let i,r=/((?:\w+\s*,\s*)*\w+\s*)(;|,)\s*$/,o=a(n.lineAt(t).text),s=r.exec(o);if(s){let t=s[1].split(",");e?"blocking"==e&&(i=t[0].trim()+" = '0;"):i=t[0].trim()+" <= '0;"}else i=o;l.push(i)}return t.edit((function(e){for(let t=0;t<l.length;++t){let i=new r.Position(t+o,0),s=new r.Position(t+o,n.lineAt(t+o).text.length),a=new r.Range(i,s);e.replace(a,l[t])}})),!0}t.getSentenceFormat=f,t.getAlignBoundary=w,t.insertString=v,t.formatDeclDelimiters=P,t.alignSignalType=b,t.alignVector=y,t.alignSignalName=x,t.alignAssign=S,t.alignBrokenAssign=_,t.autoIndent=k,t.smartIndent=function(){if(!r.window.activeTextEditor)return void r.window.showInformationMessage("Open files first!");let e=r.window.activeTextEditor,t=(e.document,e.selections[0]),n=t.active,a=t.start.line,l=t.end.line;a==l?function(e){i(this,void 0,void 0,(function*(){let t=r.window.activeTextEditor,n=t.document,a=t.selections[0].active,l=f(n.lineAt(e).text),[c,u]=w(a.line,l);return function(e,t){i(this,void 0,void 0,(function*(){let n=r.window.activeTextEditor,i=n.document,a=n.selections[0].active,l=[];for(let n=e;n<=t;++n){let e=m(i,n),t=s(i.lineAt(n).text,e),r=f(t).type;"port"==r||"param"==r||"typedef"==r||"signal"==r?t=P(t):"assign"==r&&(t=t.replace(/\s*(.=)\s*/," $1 ")),l.push(t)}if(l=b(l),l=y(l),l=x(l),l=S(l),l=_(l),!(yield n.edit((function(t){for(let n=0;n<l.length;++n){let o=new r.Position(n+e,0),s=new r.Position(n+e,i.lineAt(n+e).text.length),a=new r.Range(o,s);t.replace(a,l[n])}}))))return!1;let c=o(i.lineAt(a).text),u=a.character;u<2*c&&(u=2*c);let h=new r.Position(a.line,i.lineAt(a).text.length);return n.selection=new r.Selection(h,h),!0}))}(c,u),console.log(`Boundary (${c+1}, ${u+1})`),!0}))}(n.line):k(a,l)},t.alignRegExp=I,t.alignOpenParen=function(){I("\\(")},t.alignLineComment=function(){I("\\/\\/")},t.alignEqual=function(){I("=")},t.alignRegExpWithInput=function(){r.window.activeTextEditor?r.window.showInputBox({prompt:"Align with regexp",password:!1,value:""}).then((e=>{e&&I(e)})):r.window.showInformationMessage("Open files first!")},t.deleteTrailingWhiteSpaces=function(){if(!r.window.activeTextEditor)return void r.window.showInformationMessage("Open files first!");let e=r.window.activeTextEditor,t=e.document,n=e.selections[0],i=(n.active,n.start.line),o=n.end.line,s=[];for(let e=i;e<=o;++e){let n=t.lineAt(e).text.replace(/\s+$/,"");s.push(n)}return e.edit((function(e){for(let n=0;n<s.length;++n){let o=new r.Position(n+i,0),a=new r.Position(n+i,t.lineAt(n+i).text.length),l=new r.Range(o,a);e.replace(l,s[n])}})),!0},t.convPortDeclToConn=D,t.convPortDeclToConnImplicit=function(){D("implicit")},t.convPortDeclToSignal=function(){if(!r.window.activeTextEditor)return void r.window.showInformationMessage("Open files first!");let e=r.window.activeTextEditor,t=e.document,n=e.selections[0],i=(n.active,n.start.line),o=n.end.line,s=[];for(let e=i;e<=o;++e){let n=/(?:input|output|inout)(.+?)(;|,)?\s*$/,i=t.lineAt(e).text.replace(n,"$1;");s.push(i)}return e.edit((function(e){for(let n=0;n<s.length;++n){let o=new r.Position(n+i,0),a=new r.Position(n+i,t.lineAt(n+i).text.length),l=new r.Range(o,a);e.replace(l,s[n])}})),!0},t.convPortDeclToNextSignal=function(){if(!r.window.activeTextEditor)return void r.window.showInformationMessage("Open files first!");let e=r.window.activeTextEditor,t=e.document,n=e.selections[0],i=(n.active,n.start.line),o=n.end.line,s=[];for(let e=i;e<=o;++e){let n=/(?:input|output|inout)(.+?)(;|,)?\s*$/,i=t.lineAt(e).text.replace(n,"$1_n;");s.push(i)}return e.edit((function(e){for(let n=0;n<s.length;++n){let o=new r.Position(n+i,0),a=new r.Position(n+i,t.lineAt(n+i).text.length),l=new r.Range(o,a);e.replace(l,s[n])}})),!0},t.convPortDeclToReset=function(){if(!r.window.activeTextEditor)return void r.window.showInformationMessage("Open files first!");let e=r.window.activeTextEditor,t=e.document,n=e.selections[0],i=(n.active,n.start.line),o=n.end.line,s=[];for(let e=i;e<=o;++e){let n=/(?:output|inout)\s+(.+?)(;|,)?\s*$/,i=t.lineAt(e).text.replace(n,"$1 <= '0;");s.push(i)}return e.edit((function(e){for(let n=0;n<s.length;++n){let o=new r.Position(n+i,0),a=new r.Position(n+i,t.lineAt(n+i).text.length),l=new r.Range(o,a);e.replace(l,s[n])}})),!0},t.convSignalDeclToReset=$,t.convSignalDeclToBReset=function(){$("blocking")},t.convResetToUpdate=function(){if(!r.window.activeTextEditor)return void r.window.showInformationMessage("Open files first!");let e=r.window.activeTextEditor,t=e.document,n=e.selections[0],i=(n.active,n.start.line),o=n.end.line,s=[];for(let e=i;e<=o;++e){let n=/^.+\s(\w+?)\s*<=.+;/,i=t.lineAt(e).text.replace(n,"$1 <= $1_n;");s.push(i)}return e.edit((function(e){for(let n=0;n<s.length;++n){let o=new r.Position(n+i,0),a=new r.Position(n+i,t.lineAt(n+i).text.length),l=new r.Range(o,a);e.replace(l,s[n])}})),!0},t.convResetToNext=function(){if(!r.window.activeTextEditor)return void r.window.showInformationMessage("Open files first!");let e=r.window.activeTextEditor,t=e.document,n=e.selections[0],i=(n.active,n.start.line),o=n.end.line,s=[];for(let e=i;e<=o;++e){let n=/^.+\s(\w+?)\s*<=.+;/,i=t.lineAt(e).text.replace(n,"$1_n = $1;");s.push(i)}return e.edit((function(e){for(let n=0;n<s.length;++n){let o=new r.Position(n+i,0),a=new r.Position(n+i,t.lineAt(n+i).text.length),l=new r.Range(o,a);e.replace(l,s[n])}})),!0},t.incSelectedNumbers=function(){if(!r.window.activeTextEditor)return void r.window.showInformationMessage("Open files first!");let e=r.window.activeTextEditor,t=e.document,n=e.selections,i=[],o=[],s=[];for(let e=0;e<n.length;++e){let r=n[e],a=t.getText(r),l=/^([^\d]*)(\d+)(.*)$/.exec(a);l?(i.push(l[1]),o.push((Number(l[2])+1).toString()),s.push(l[3])):(i.push(""),o.push(""),s.push(""))}return e.edit((function(e){for(let t=0;t<n.length;++t)o[t].length>0&&e.replace(n[t],`${i[t]}${o[t]}${s[t]}`)})),!0},t.insSeqNumber=function(){if(r.window.activeTextEditor)return r.window.showInputBox({prompt:"Start nubmer?",password:!1,value:""}).then((e=>{if(!e)return;let t=Number(e),n=r.window.activeTextEditor,i=n.document,o=n.selections,s=[],a=[],l=[];for(let e=0;e<o.length;++e){let n=o[e],r=i.getText(n),c=/^([^\d]*)(\d+)(.*)$/.exec(r);c?(s.push(c[1]),a.push((t+e).toString()),l.push(c[3])):0==r.length?(s.push(""),a.push((t+e).toString()),l.push("")):(s.push(""),a.push(""),l.push(""))}n.edit((function(e){for(let t=0;t<o.length;++t)a[t].length>0&&e.replace(o[t],`${s[t]}${a[t]}${l[t]}`)}))})),!0;r.window.showInformationMessage("Open files first!")},t.swapPortDirection=function(){if(!r.window.activeTextEditor)return void r.window.showInformationMessage("Open files first!");let e=r.window.activeTextEditor,t=e.document,n=e.selections[0],i=(n.active,n.start.line),o=n.end.line,s=[];for(let e=i;e<=o;++e){let n=t.lineAt(e).text;n=/\binput\b/.test(n)?n.replace(/\binput\b/,"output"):n.replace(/\boutput\b/,"input"),s.push(n)}return e.edit((function(e){for(let n=0;n<s.length;++n){let o=new r.Position(n+i,0),a=new r.Position(n+i,t.lineAt(n+i).text.length),l=new r.Range(o,a);e.replace(l,s[n])}})),!0},t.labelComment=function(){if(!r.window.activeTextEditor)return void r.window.showInformationMessage("Open files first!");let e=r.window.activeTextEditor,t=e.document,n=e.selections[0],i=(n.active,n.start.line),o=(n.end.line,t.lineAt(i).text.replace(/\s*$/,"")),s=/(\S+)\s*:/.exec(o);if(s){let n=s[1],a=o.length,l=n.length,c=o+" // "+"-".repeat(80-a-4-(l+3))+` [${n}]`;e.edit((function(e){let n=new r.Position(i,0),o=new r.Position(i,t.lineAt(i).text.length),s=new r.Range(n,o);e.replace(s,c)}))}return!0}},766:(e,t,n)=>{"use strict";const i=n(549),r=n(862),o=/\s*entity\s+(\w*)\s+is.*/,s=/\s*architecture\s+(\w*)\s+of\s+(\w*)\s+is.*/,a=/\s*configuration\s+(\w*)\s+of\s+(\w*)\s+is.*/,l=/\s*end\s+(\w*).*/;let c=D("library"),u=D("use"),h=D("package"),p=D("architecture"),d=D("entity"),m=D("configuration"),g=D("is"),f=D("begin"),w=D("end"),v=(D("map"),D("of")),P=D("for"),b=[$("abs"),$("and"),$("mod"),$("nand"),$("nor"),$("not"),$("or"),$("rem"),$("rol"),$("ror"),$("sla"),$("sll"),$("sra"),$("srl"),$("xnor"),$("xor")],y=[$("array"),$("type"),$("component"),$("constant"),$("signal"),$("subtype"),$("variable"),$("assert"),$("severity"),$("report"),$("process"),$("with"),$("select"),$("when"),$("others"),$("block"),$("function"),$("procedure"),$("case"),$("else"),$("elsif"),$("for"),$("generate"),$("if"),$("loop"),$("map"),$("next"),$("others"),$("return"),$("wait"),$("then"),$("return"),$("when"),$("while")],x=[$("in"),$("out"),$("inout"),$("buffer"),$("linkage")],S=[$("generic"),$("port")],_=[D("bit","The bit data type can only have the value 0 or 1."),D("bit_vector","The bit_vector data type is the vector version of the bit type consisting of two or more bits. Each bit in a bit_vector can only have the value 0 or 1."),D("boolean","True or false"),D("integer","32-bit\tintegers."),D("natural","non\tnegative integer."),D("positive","positive\tinteger."),D("real","floating point number."),D("time","Time in fs,\tps,\tns,\tus,\tms,\tsec, min, hr"),D("character",""),D("string","String for VHDL."),$("downto"),$("std_logic")];!function(e){e[e.Vhdl=0]="Vhdl",e[e.Entity=1]="Entity",e[e.Architecture=2]="Architecture",e[e.Configuration=3]="Configuration"}(t.VhdlScopeKind||(t.VhdlScopeKind={}));class k{constructor(e,t){this.kind=e,this.children=[],this.lineFrom=t}addChild(e){this.children.push(e),e.parent=this}}class I{constructor(e){this.cursorLineNum=e}guess(e){this.enterScope(VhdlScopeKind.Vhdl,0);for(var t=0;t<e.lineCount;t++){var n=e.lineAt(t);if(!n.isEmptyOrWhitespace){let e=n.text;if(e.match(/^\s*\-\-/))continue;e.match(o)?this.enterScope(VhdlScopeKind.Entity,t):e.match(s)?this.enterScope(VhdlScopeKind.Architecture,t):e.match(a)?this.enterScope(VhdlScopeKind.Configuration,t):e.match(l)&&this.exitScope(t)}}return this.exitScope(e.lineCount),this.scopeAtCursor}enterScope(e,t){let n=new k(e,t);this.currentScope&&this.currentScope.addChild(n),this.currentScope=n}exitScope(e){this.currentScope.lineTo=e,this.scopeAtCursor||this.currentScope.lineFrom<=this.cursorLineNum&&this.currentScope.lineTo>=this.cursorLineNum&&(this.scopeAtCursor=this.currentScope),this.currentScope.parent&&(this.currentScope=this.currentScope.parent)}}function D(e,t){let n=new i.CompletionItem(e);return n.kind=i.CompletionItemKind.Keyword,t&&(n.documentation=t),n}function $(e,t){let n=new i.CompletionItem(e);return n.kind=i.CompletionItemKind.Value,n.documentation=t,n}t.vhdlCompletion=class{provideCompletionItems(e,t,n){return new Promise(((n,i)=>{e.fileName;let r=e.lineAt(t.line).text;if(r.match(/^\s*\-\-/))return n([]);let o=!1;(r.substring(0,t.character).match(/\"/g)||[]).length;let s=[],a=r.substring(0,t.character-1);var l,k;switch((l=e,k=t.line,new I(k).guess(l)).kind){case VhdlScopeKind.Vhdl:s.push(p),s.push(f),s.push(m),s.push(w),s.push(d),s.push(g),s.push(h),s.push(u),s.push(c);break;case VhdlScopeKind.Entity:a.match(/^\s*\w*$/)?(s.push(...S),s.push(...x),s.push(f),s.push(w)):a.match(/(in|out|inout|buffer|linkage)\s*$/)&&s.push(..._);break;case VhdlScopeKind.Architecture:a.match(/^\s*\w*$/)?(s.push(...y),s.push(f),s.push(w),s.push(g),s.push(v)):a.match(/(in|out|inout|buffer|linkage)\s*$/)||a.match(/(signal|variable|constant|subtype|type|array)\s*\w*:\s*$/)?s.push(..._):a.match(/(<=|:=)\s*\w*\s*$/)&&s.push(...b);break;case VhdlScopeKind.Configuration:s.push(P)}return n(s)}))}},t.vlogCompletion=class{constructor(e){this.HDLparam=e}provideCompletionItems(e,t,n){return new Promise(((n,i)=>{var o=new RegExp([/(?:(?<modifier>virtual|static|automatic|rand|randc|pure virtual)\s+)?/,/\b(?<type>[:\w]+)\s*/,/(?<params>#\s*\(\s*\.[\w\W]*?\))?\s*/,/(\b\w+\s*,\s*)*?/,/\b(?<name>\w+)\s*/,/(?:(\(\s*\.[\w\W]*?\)))\s*/,/\s*(?<end>;)/].map((e=>"string"==typeof e?e:e.source)).join(""),"mg");let s=[],a=e.getText(),l=this.line_index_to_character_index(a,t),c=r.simParser.getCommentRange(a,0);for(a=r.simParser.delComments(a);;){let e=o.exec(a);if(null==e)break;if(0==e.index||r.simParser.isIllegalRange(e,c,0))continue;let t=e.index+e[0].indexOf(this.getMatchContent(e[3])),n=t+this.getMatchLength(e[3]),i=e.index+e[0].indexOf(this.getMatchContent(e[6])),u=i+this.getMatchLength(e[6]);l>=t&&l<=n&&(s=this.getParamInfo(this.HDLparam,e.groups.type)),l>=i&&l<=u&&(s=this.getPortInfo(this.HDLparam,e.groups.type))}return n(s)}))}getParamInfo(e,t){let n=0,r=[];for(n=0;n<e.length&&e[n].moduleName!=t;n++);for(let t=0;t<e[n].param.length;t++){const o=e[n].param[t];let s=new i.CompletionItem(o.paramName);s.kind=i.CompletionItemKind.Value,r.push(s)}return r}getPortInfo(e,t){let n=0,r=[];for(n=0;n<e.length&&e[n].moduleName!=t;n++);for(let t=0;t<e[n].port.input.length;t++){const o=e[n].port.input[t];let s=new i.CompletionItem(o.portName);s.kind=i.CompletionItemKind.Interface,r.push(s)}for(let t=0;t<e[n].port.output.length;t++){const o=e[n].port.output[t];let s=new i.CompletionItem(o.portName);s.kind=i.CompletionItemKind.Interface,r.push(s)}for(let t=0;t<e[n].port.inout.length;t++){const o=e[n].port.inout[t];let s=new i.CompletionItem(o.portName);s.kind=i.CompletionItemKind.Interface,r.push(s)}return r}getMatchLength(e){return null!=e?e.length:0}getMatchContent(e){return null!=e?e:""}line_index_to_character_index(e,t){let n=e.split("\n"),i=0;for(let e=0;e<t.line;++e)i+=n[e].length+1;return i+=t.character,i}},t.jsonCompletion=class{constructor(){this.Apply=["DSP","Image"],this.DSP=["Advance","Base"],this.Advance=["Communicate"],this.Communicate=["Demodulate","Modulate"],this.Demodulate=["IQ"],this.Modulate=["AM","FM"],this.Base=["CLK","DDS"],this.Math=["Cordic.v","Sort3.v"],this.Soc=["Cortex_M0","Cortex_M3"]}provideCompletionItems(e,t,n){return new Promise(((n,i)=>{let r=[],o=e.lineAt(t.line).text.match(/(\w+\/+)+/g)[0].split("/");switch(o[o.length-2]){case"Apply":this.createCompletionItem(this.Apply,r);break;case"DSP":this.createCompletionItem(this.DSP,r);break;case"Advance":this.createCompletionItem(this.Advance,r);break;case"Communicate":this.createCompletionItem(this.Communicate,r);break;case"Demodulate":this.createCompletionItem(this.Demodulate,r);break;case"Modulate":this.createCompletionItem(this.Modulate,r);break;case"Base":this.createCompletionItem(this.Base,r);break;case"Math":this.createCompletionItem(this.Math,r);break;case"Soc":this.createCompletionItem(this.Soc,r)}return n(r)}))}createCompletionItem(e,t){for(let n=0;n<e.length;n++){const r=e[n];let o=new i.CompletionItem(r);o.kind=i.CompletionItemKind.Keyword,t.push(o)}}}},61:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};const r=n(549);t.numberHoverProvider=class{provideHover(e,t,n){let i;return"systemverilog"==e.languageId||"verilog"==e.languageId?i=this.verilog_hover(e,t,n):"vhdl"==e.languageId&&(i=this.vhdl_hover(e,t,n)),i}vhdl_hover(e,t,n){let i=e.getWordRangeAtPosition(t,/\w[-\w\.\"]*/g);if(void 0!==i){let t=e.getText(new r.Range(i.start,i.end));if(/x"[0-9a-fA-F_]+"/g.test(t)){let e=/x"([0-9a-fA-F_]+)"/g.exec(t.replace("_",""));if(null===e||null===e[1])return;let n=parseInt(e[1],16),i=this.eval_signed_hex(e[1],n);return n===i?new r.Hover(t+" = "+n):new r.Hover(t+" = "+n+" (unsigned)  || "+i+" (signed)")}if(/[0-1_]+"/g.test(t)){let e=/([0-1_]+)"/g.exec(t.replace("_",""));if(null===e||null===e[1])return;let n=parseInt(e[0],2),i=this.eval_signed_bin(e[0],n);return n===i?new r.Hover('"'+t+" = "+n):new r.Hover('"'+t+" = "+n+" (unsigned) || "+i+" (signed)")}}}verilog_hover(e,t,n){let i=e.getWordRangeAtPosition(t,/\w[-\w\.\']*/g);if(void 0!==i){let t=e.getText(new r.Range(i.start,i.end));if(/h[0-9a-fA-F_]+/g.test(t)){let e=/h([0-9a-fA-F_]+)/g.exec(t.replace("_",""));if(null===e||null===e[1])return;let n=parseInt(e[1],16),i=this.eval_signed_hex(e[1],n);return n===i?new r.Hover(t+" = "+n):new r.Hover(t+" = "+n+" (unsigned) || "+i+" (signed)")}if(/b[0-1_]+/g.test(t)){let e=/b([0-1_]+)/g.exec(t.replace("_",""));if(null===e||null===e[1])return;let n=parseInt(e[1],2),i=this.eval_signed_bin(e[1],n);return n===i?new r.Hover(t+" = "+n):new r.Hover(t+" = "+n+" (unsigned) || "+i+" (signed)")}if(/o[0-8_]+/g.test(t)){let e=/o([0-7_]+)/g.exec(t.replace("_",""));if(null===e||null===e[1])return;let n=parseInt(e[1],8),i=this.eval_signed_oct(e[1],n);return n===i?new r.Hover(t+" = "+n):new r.Hover(t+" = "+n+" (unsigned) || "+i+" (signed)")}}}eval_signed_hex(e,t){let n=Math.pow(16,e.length),i=t;return t>=n>>1&&(i=t-n),i}eval_signed_bin(e,t){let n=1<<e.length-1,i=t;return t>=n>>1&&(i=t-n),i}eval_signed_oct(e,t){let n=Math.pow(8,e.length),i=t;return t>=n>>1&&(i=t-n),i}},t.HoverProvider=class{provideHover(e,t,n){return new Promise(((i,o)=>{if(!e.getWordRangeAtPosition(t))return i(void 0);i(r.commands.executeCommand("vscode.executeDefinitionProvider",e.uri,t,n).then((e=>r.workspace.openTextDocument(e[0].uri).then((t=>{let n=t.lineAt(e[0].range.start.line).text;return n=String.prototype.trim?n.trim():n.replace(/^\s+(.*?)\s+$/g,"$1"),n=this.del_spacing(n,4),n=n.replace(/\/\//g,"\n//")+"\n"+this.get_comment(t,e[0].range.start.line-1),n})))).then((e=>new r.Hover({language:"systemverilog",value:e}))))}))}get_comment(e,t){let n="",i=[],r=e.lineAt(t).text,o=r.match(/\S+/g),s=r.match(/(?<!(\s*\w+\s*))(\/\/.*)/g),a=r.match(/.*\*\//g);for(;null!=s||null!=a||null==o;){if(null!=o)if(null!=s)i.push(s+"\n");else for(i.push(a+"\n");;){if(t-=1,r=e.lineAt(t).text,a=r.match(/\/\*.*/g),null!=a||0==t){i.push(a+"\n");break}i.push(r+"\n")}t-=1,r=e.lineAt(t).text,o=r.match(/\S+/g),s=r.match(/(?<!(\s*\w+\s*))(\/\/.*)/g),a=r.match(/.*\*\//g)}for(let e=i.length-1;e>=0;e--)n+=i[e];return n}del_spacing(e,t){let n="",i=0;for(let r=0;r<e.length;r++){const o=e[r];" "==o&&i++,(" "!=o&&"\t"!=o||i<=t)&&(n+=o,i>t&&(i=0))}return n}},t.DefinitionProvider=class{constructor(e){this.regex_port="\\.word\\s*\\(",this.regex_package="\\b(\\w+)\\s*::\\s*(word)",this.workspaceSymProvider=e}provideDefinition(e,t,n){return new Promise(((o,s)=>i(this,void 0,void 0,(function*(){let i=e.getWordRangeAtPosition(t),a=e.lineAt(t.line).text,l=e.getText(i),c=a.match(this.regex_port.replace("word",l)),u=a.match(this.regex_package.replace("word",l));if(i)if(c&&c.index===i.start.character-1){let t=this.moduleFromPort(e,i);o(Promise.resolve(this.workspaceSymProvider.provideWorkspaceSymbols(t,n,!0).then((e=>Promise.all(e.map((e=>this.findPortLocation(e,l)))))).then((e=>this.clean(e,void 0))))),s()}else u&&a.indexOf(l,u.index)==i.start.character?(yield this.workspaceSymProvider.provideWorkspaceSymbols(u[1],n,!0).then((e=>{if(e.length&&e[0].location)return e[0].location.uri})).then((e=>{e&&r.commands.executeCommand("vscode.executeDocumentSymbolProvider",e,l).then((t=>{let n=[];this.getDocumentSymbols(n,t,l,e,u[1]),o(n)}))})),s()):(yield r.commands.executeCommand("vscode.executeDocumentSymbolProvider",e.uri,l).then((t=>{let n=[];this.getDocumentSymbols(n,t,l,e.uri),0!==n.length&&o(n)})),yield this.workspaceSymProvider.provideWorkspaceSymbols(l,n,!0).then((e=>{0!==e.length&&o(e.map((e=>e.location)))})),s());else s()}))))}findPortLocation(e,t){return r.workspace.openTextDocument(e.location.uri).then((n=>{for(let i=e.location.range.start.line;i<n.lineCount;i++){let o=n.lineAt(i).text;if(o.match("\\bword\\b".replace("word",t)))return new r.Location(e.location.uri,new r.Position(i,o.indexOf(t)))}}))}moduleFromPort(e,t){let n=e.getText(new r.Range(new r.Position(0,0),t.end)),i=0,o=0;for(o=n.length;o>0;o--)if(")"==n[o]?i++:"("==n[o]&&i--,-1==i){let e=n.slice(0,o).match(/(\w+)\s*#\s*$/),t=n.slice(0,o).match(/(\w+)\s+(\w+)\s*$/);if(e)return e[1];if(t)return t[1]}}getDocumentSymbols(e,t,n,i,r){for(let o of t)o.name===n&&(r?o.containerName===r&&e.push({uri:i,range:o.range}):e.push({uri:i,range:o.range})),o.children&&this.getDocumentSymbols(e,o.children,n,i)}clean(e,t){for(var n=0;n<e.length;n++)e[n]==t&&(e.splice(n,1),n--);return e}},t.DocumentSymbolProvider=class{constructor(e){this.depth=-1,this.indexer=e;const t=r.workspace.getConfiguration();this.precision=t.get("HDL.documentSymbolsPrecision"),"full"!=this.precision&&(this.depth=1)}provideDocumentSymbols(e,t){return new Promise((t=>{t(this.indexer.getFileParam(e,"symbol",0,null,null,this.indexer.HDLSymbol))}))}},t.WorkspaceSymbolProvider=class{constructor(e){this.NUM_FILES=250,this.indexer=e}provideWorkspaceSymbols(e,t,n){return new Promise(((t,i)=>{if(0===e.length)t(this.indexer.mostRecentSymbols);else{const i=new RegExp(".*"+e.replace(" ","").split("").map((e=>e)).join(".*")+".*","i");let r=new Array;this.indexer.symbols.forEach((t=>{t.forEach((t=>{!0===n?t.name==e&&r.push(t):t.name.match(i)&&r.push(t)}))})),this.indexer.updateMostRecentSymbols(r.slice(0)),t(r)}}))}provideWorkspaceModule(e){if(0!==e.length){let t;return this.indexer.symbols.forEach((n=>{if(n.forEach((n=>{if(n.name==e&&n.kind==this.indexer.HDLSymbol.getSymbolKind("module"))return t=n,!1})),t)return!1})),this.indexer.updateMostRecentSymbols([t]),t}}}},231:(e,t,n)=>{"use strict";const i=n(549),r=n(862);function o(e){const t=i.window.activeTextEditor;if(void 0===t)return;const n=t.selections;t.edit((t=>{n.forEach((n=>{t.insert(n.active,e)}))}))}function s(e){let t=e.moduleName,n=0,i="";for(let t=0;t<e.port.output.length;t++)e.port.output[t].portWidth.length>n&&(n=e.port.output[t].portWidth.length);for(let t=0;t<e.port.output.length;t++){let r=e.port.output[t].portWidth,o=n-r.length+1;r=r.replace("(","[").replace(")","]").replace(/downto/gim,":")+" ".repeat(o),i+=`wire ${r}\t${e.port.output[t].portName};\n`}let r="";e.param.length>0&&(r=`#(\n${function(e){let t="",n=0,i=0;for(let t=0;t<e.length;t++)e[t].paramName.length>n&&(n=e[t].paramName.length);for(let t=0;t<e.length;t++)e[t].paramInit=e[t].paramInit.replace(",",""),e[t].paramInit.length>i&&(i=e[t].paramInit.length);for(let r=0;r<e.length;r++){let o=e[r].paramName,s=e[r].paramInit,a=n-o.length+1,l=i-s.length+1;o+=" ".repeat(a),s+=" ".repeat(l),t+=`\t.${o}\t\t( ${s}\t\t)`,r!==e.length-1&&(t+=",",t+="\n")}return t}(e.param)})\n`);let o="";o=function(e){let t="",n=0,i=0;for(n=0;n<e.input.length;n++)e.input[n].portName.length>i&&(i=e.input[n].portName.length);for(n=0;n<e.output.length;n++)e.output[n].portName.length>i&&(i=e.output[n].portName.length);for(n=0;n<e.inout.length;n++)e.inout[n].portName.length>i&&(i=e.inout[n].portName.length);t+="\t//input\n";for(let n=0;n<e.input.length;n++){let r=e.input[n].portName,o=i-r.length+1;r+=" ".repeat(o),0==e.output.length?(t+=`\t.${r}\t\t( ${r}\t\t)`,n!==e.input.length-1&&(t+=","),t+="\n"):t+=`\t.${r}\t\t( ${r}\t\t),\n`}t+="\n\t//output\n";for(let n=0;n<e.output.length;n++){let r=e.output[n].portName,o=i-r.length+1;r+=" ".repeat(o),0==e.inout.length?(t+=`\t.${r}\t\t( ${r}\t\t)`,n!==e.output.length-1&&(t+=","),t+="\n"):t+=`\t.${r}\t\t( ${r}\t\t),\n`}t+="\n\t//inout\n";for(let n=0;n<e.inout.length;n++){let r=e.inout[n].portName,o=i-r.length+1;r+=" ".repeat(o),t+=`\t.${r}\t\t( ${r}\t\t)`,n!==e.length-1&&(t+=","),t+="\n"}return t}(e.port);let s=i+"\n";return s+=t,s+=" ",s+=r,s+=`u_${t}(\n`,s+=o,s+=");\n",s}function a(e){let t=e.moduleName,n="";e.param.length>0&&(n=`generic map(\n${function(e){let t="",n=0;for(let t=0;t<e.length;t++)e[t].paramName.length>n&&(n=e[t].paramName.length);for(let i=0;i<e.length;i++){let r=e[i].paramName,o=e[i].paramInit,s=n-r.length+1;r+=" ".repeat(s),t+=`\t${r} => ${o}`,i!==e.length-1&&(t+=",",t+="\n")}return t}(e.param)})\n`);let i="";i=`port map(\n${function(e){let t="",n=0,i=0;for(n=0;n<e.length;n++)e.input[n].portName.length>i&&(i=e[n].portName.length);for(n=0;n<e.output.length;n++)e.output[n].portName.length>i&&(i=e.output[n].portName.length);for(n=0;n<e.inout.length;n++)e.inout[n].portName.length>i&&(i=e.inout[n].portName.length);t+="\t-- input\n";for(let n=0;n<e.input.length;n++){let r=e.input[n].portName,o=i-r.length+1;r+=" ".repeat(o),0==e.output.length?(t+=`\t${r} => ${e.input[n].portName}`,n!==e.input.length-1&&(t+=","),t+="\n"):t+=`\t${r} => ${e.input[n].portName},\n`}t+="\n\t-- output\n";for(let n=0;n<e.output.length;n++){let r=e.output[n].portName,o=i-r.length+1;r+=" ".repeat(o),0==e.inout.length?(t+=`\t${r} => ${e.output[n].portName}`,n!==e.output.length-1&&(t+=","),t+="\n"):t+=`\t${r} => ${e.output[n].portName},\n`}t+="\n\t-- inout\n";for(let n=0;n<e.inout.length;n++){let r=e.inout[n].portName,o=i-r.length+1;r+=" ".repeat(o),t+=`\t${r} => ${e.inout[n].portName}`,n!==e.length-1&&(t+=","),t+="\n"}return t}(e.port)})`;let r=`${t} : u_${t}\n`;return r+=n,r+=i,r+=";\n",r}t.instantiateModuleInteract=function(e,t){var n=i.window.activeTextEditor.document;r.simParser.selectModule(e.HDLparam,t).then((e=>{null!=e&&("systemverilog"==n.languageId||"verilog"==n.languageId?o(s(e)):"vhdl"==n.languageId&&o(a(e)))}))},t.selectInsert=o,t.instantiateVlogModule=s,t.instantiateVhdlModule=a},556:(e,t,n)=>{"use strict";const i=n(747),r=n(549),o=n(862),s=n(231);function a(e,t){const n=r.window.activeTextEditor;void 0!==n&&n.edit((n=>{n.insert(e,t)}))}function l(e){let t=0,n=i.readFileSync(e).split("\n");for(let e=0;e<n.length&&-1==n[e].indexOf("//Instance ");e++)t++;return new r.Position(t,0)}t.genInstancetoTbFile=function(e,t){var n=r.window.activeTextEditor.document;o.simParser.selectCurrentFileModule(e.HDLparam,n).then((e=>{if(null!=e)if("systemverilog"==n.languageId||"verilog"==n.languageId){let n=s.instantiateVlogModule(e);a(l(t),n)}else if("vhdl"==n.languageId){let n=s.instantiateVhdlModule(e);a(l(t),n)}}))},t.appiontInsert=a},357:function(e,t,n){"use strict";this&&this.__awaiter,Object.defineProperty(t,"__esModule",{value:!0});const i=n(747),r=n(129),o=n(622),s=n(549),a=n(862),l=n(444);let c=s.workspace.getConfiguration().get("TOOL.gtkwave.install.path");t.Overwrite_tb=function(e){let t="";s.window.showInformationMessage("Which type you want to Overwrite?","vlog","vhdl").then((function(n){"vlog"==n?t=`${e.rootPath}/../lib/src_lib/Hardware/testbench.v`:"vhdl"==n&&(t=`${e.rootPath}/../lib/src_lib/Hardware/testbench.vhd`)}));const n={preview:!1,viewColumn:s.ViewColumn.Active};s.window.showTextDocument(s.Uri.file(t),n)},t.generatetbFile=function(e){let t="",n="";s.window.showInformationMessage("Which type you want to generate?","vlog","vhdl").then((function(r){if("vlog"==r?(t=`${e.currentSrcPath}/sim/testbench.v`,n=`${e.rootPath}/../lib/src_lib/Hardware/testbench.v`):"vhdl"==r&&(t=`${e.currentSrcPath}/sim/testbench.vhd`,n=`${e.rootPath}/../lib/src_lib/Hardware/testbench.vhd`),i.existsSync(t))s.window.showWarningMessage("testbench file already exists !!!");else{let e=i.readFileSync(n,"utf8");l.dirs.mkdir(o.dirname(n)),i.writeFileSync(t,e,"utf8")}}))},t.iverilogSimulate=class{constructor(e){this.opeParam=e,this.simLibRootPath="",this.LibPath="",this.GlblPath="",this.setting=s.workspace.getConfiguration(),this.getConfig(),s.workspace.onDidChangeConfiguration((function(){this.getConfig()}))}getConfig(){this.installPath=this.setting.get("TOOL.iVerilog.install.path"),this.runFilePath=this.setting.get("HDL.linting.runFilePath"),this.iverilogArgs=this.setting.get("HDL.linting.iverilog.arguments")}simulate(e){this.getConfig();let t=s.window.activeTextEditor;if(!t)return;""==this.runFilePath&&(this.runFilePath=`${this.opeParam.workspacePath}prj/simulation/iVerilog`,l.dirs.mkdir(this.runFilePath));let n="vvp",i="gtkwave",o="iverilog";""!=this.installPath&&(n=this.installPath+"vvp.exe",o=this.installPath+"iverilog.exe"),""!=c&&(i=c+"gtkwave.exe"),""!=this.opeParam.propertyPath&&"xilinx"==l.files.pullJsonInfo(this.opeParam.propertyPath).FPGA_VERSION&&this.xilinxLibPath();let u=[];for(let n=0;n<e.HDLparam.length;n++){const i=e.HDLparam[n];i.modulePath==t.document.fileName.replace(/\\/g,"/").replace("//","/")&&u.push(i.moduleName)}if(u.length>=1){let l="",c=[];e.HDLparam.forEach((e=>{e.moduleName==u[0]&&e.instmodule.forEach((e=>{c.push(e.instModPath)}))})),c=this.removeDuplicates(c),c.forEach((e=>{l=l+e+" "}));let h=`${o} -g2012 -o ${this.runFilePath}/out.vvp `+`${t.document.fileName} `.replace(/\\/g,"/").replace("//","/")+`${l} `.replace(/\\/g,"/").replace("//","/")+`${this.GlblPath} `+`${this.LibPath}`,p=a.simParser.getWaveImagePath(t.document.getText());r.exec(h,{cwd:this.runFilePath},(function(e,t,r){if(s.window.showInformationMessage(t),null!==e)s.window.showErrorMessage(r);else if(s.window.showInformationMessage("iVerilog simulates successfully!!!"),""!=p){let e=p.split("."),t=s.window.createTerminal({name:"Simulate"});t.show(!0),t.sendText(`${n} ${this.runFilePath}/out.vvp -${e[e.length-1]}`);let r=s.window.createTerminal({name:"gtkwave"});r.show(!0),r.sendText(`${i} ${p}`)}else s.window.showWarningMessage("There is no wave image path in this testbench")}))}else s.window.showWarningMessage("There is no module in this file")}xilinxLibPath(){if(this.simLibRootPath=this.setting.get("TOOL.xilinx.install.path"),""!=this.simLibRootPath){let e="2019.2",t=i.readdirSync(`${this.simLibRootPath}/Vivado`,"utf-8");1==t.length&&(e=t[0]),this.simLibRootPath=`${this.simLibRootPath}/Vivado/`+e+"/data/verilog/src",this.GlblPath=this.simLibRootPath+"/glbl.v ",this.LibPath="-y "+this.simLibRootPath+"/xeclib ",this.LibPath=this.LibPath+"-y "+this.simLibRootPath+"/unisims ",this.LibPath=this.LibPath+"-y "+this.simLibRootPath+"/unimacro ",this.LibPath=this.LibPath+"-y "+this.simLibRootPath+"/unifast ",this.LibPath=this.LibPath+"-y "+this.simLibRootPath+"/retarget "}else s.window.showInformationMessage("TOOL.xilinx.install.path is empty")}removeDuplicates(e){let t=[];for(var n=0,i=e.length;n<i;n++){for(var r=n+1;r<i;r++)e[n]===e[r]&&(r=++n);t.push(e[n])}return t}}},470:(e,t,n)=>{"use strict";const i=n(747),r=n(549);function o(e){let t=!1;return r.window.terminals.forEach((n=>{n.name==e&&(t=!0)})),t}n(129),t.socRegister=class{constructor(e){this.StartSDK=null,this.opeParam=e}SDK_Launch(){this.getSocMode(this.opeParam)?(o("this.StartSDK")||(this.StartSDK=r.window.createTerminal({name:"this.StartSDK"})),this.StartSDK.show(!0),this.StartSDK.sendText(`xsct ${this.opeParam.rootPath}/../resources/tool/Xilinx/Script/SDK/xsct_create_prj.tcl`)):r.window.showWarningMessage("Please confirm the mode of soc")}SDK_Build(){this.getSocMode(this.opeParam)?(o("this.StartSDK")||(this.StartSDK=r.window.createTerminal({name:"this.StartSDK"})),this.StartSDK.show(!0),this.StartSDK.sendText(`xsct ${this.opeParam.rootPath}/../resources/tool/Xilinx/Script/SDK/xsct_Build.tcl`)):r.window.showWarningMessage("Please confirm the mode of soc")}SDK_Download(){this.getSocMode(this.opeParam)?(o("this.StartSDK")||(this.StartSDK=r.window.createTerminal({name:"this.StartSDK"})),this.StartSDK.show(!0),this.StartSDK.sendText(`xsct ${this.opeParam.rootPath}/../resources/tool/Xilinx/Script/SDK/xsct_Download.tcl`)):r.window.showWarningMessage("Please confirm the mode of soc")}getSocMode(e){let t=i.readFileSync(e.propertyPath,"utf8");return"none"!=JSON.parse(t).SOC_MODE.soc}}},763:(e,t,n)=>{"use strict";const i=n(747),r=n(622),o=n(549),s=n(862);class a{constructor(e,t){this._onDidChangeTreeData=new o.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,this.HDLparam=e,this.opeParam=t}refresh(e){e?this._onDidChangeTreeData.fire(e):this._onDidChangeTreeData.fire()}getChildren(e){if(e)switch(e.type){case"src":return s.simParser.getSrcTopElement(this.opeParam,s.simParser.getTopElement(this.HDLparam));case"sim":return s.simParser.getTbTopElement(this.opeParam,s.simParser.getTopElement(this.HDLparam));default:return s.simParser.getChildElement(e.type,this.HDLparam)}return[{type:"src",fspath:""},{type:"sim",fspath:""}]}getTreeItem(e){let t=this.getChildren(e),n="",r="top";""==e.name||null==e.name?(r="src"==e.type?"src":"top","sim"==e.type&&(r="sim"),"src"!=e.type&&"sim"!=e.type&&-1==e.fspath.indexOf(this.opeParam.workspacePath)&&(r="lib",i.existsSync(e.fspath)||(r="File Error")),n=e.type):(i.existsSync(e.fspath)?-1!=e.fspath.indexOf(this.opeParam.workspacePath)?"vlog"==this.getLanguageId(e.fspath)?r="verilog":"vhdl"==this.getLanguageId(e.fspath)&&(r="vhdl"):r="lib":r="File Error",n=e.name+" ( "+e.type+" )");const s=new o.TreeItem(n,0===t.length?o.TreeItemCollapsibleState.None:o.TreeItemCollapsibleState.Collapsed);let a=[];for(let e=0;e<t.length;e++){const n=t[e];a.push(this.getTreeItem(n))}return s.tooltip=e.fspath,s.contextValue="file",s.children=a,s.iconPath={light:`${this.opeParam.rootPath}/../images/svg/light/`+r+".svg",dark:`${this.opeParam.rootPath}/../images/svg/dark/`+r+".svg"},s.command={title:"Open this HDL File",command:"FILE.openFile",arguments:[e.fspath]},s}getLanguageId(e){let t=[".vhd",".vhdl",".vho",".vht"],n=[".v",".V",".vh",".vl",".sv",".SV"],i=r.extname(e).toLowerCase();for(let e=0;e<n.length;e++)if(i===n[e])return"vlog";for(let e=0;e<t.length;e++)if(i===t[e])return"vhdl";return null}}t.FileSystemProvider=a,t.FileExplorer=class{constructor(e,t){this.treeDataProvider=new a(e,t),this.fileExplorer=o.window.registerTreeDataProvider("TOOL.file_tree",this.treeDataProvider),o.commands.registerCommand("FILE.refresh",(()=>this.treeDataProvider.refresh())),o.commands.registerCommand("FILE.openFile",(e=>this.openResource(e)))}openResource(e){o.window.showTextDocument(o.Uri.file(e))}},t.fpgaTreeDataProvider=class{constructor(e){this.opeParam=e}getChildren(e){return e?"Build"===e.name?[{name:"Synth"},{name:"Impl"},{name:"Gen_Bit"}]:[]:[{name:"Launch"},{name:"Simulate"},{name:"Refresh"},{name:"Build"},{name:"Program"},{name:"GUI"},{name:"Exit"}]}getTreeItem(e){let t=this.getChildren(e);const n=new o.TreeItem(e.name,0===t.length?o.TreeItemCollapsibleState.None:o.TreeItemCollapsibleState.Collapsed);let i=[];for(let e=0;e<t.length;e++){const n=t[e];i.push(this.getTreeItem(n))}return n.contextValue="FPGA",n.children=i,n.command=this.getCommand(e.name),n.tooltip=this.getToolTip(e.name),n.iconPath=this.getIconPath(e.name),n}getCommand(e){let t={title:e,command:""};switch(e){case"Launch":t.command="FPGA.Launch";break;case"Simulate":t.command="FPGA.Simulate";break;case"Refresh":t.command="FPGA.Refresh";break;case"Build":t.command="FPGA.Build";break;case"Program":t.command="FPGA.Program";break;case"GUI":t.command="FPGA.GUI";break;case"Exit":t.command="FPGA.Exit";break;case"Synth":t.command="FPGA.Synth";break;case"Impl":t.command="FPGA.Impl";break;case"Gen_Bit":t.command="FPGA.Gen_Bit"}return t}getIconPath(e){let t="";switch(e){case"Launch":case"Simulate":case"Refresh":case"Build":case"Program":case"GUI":case"Exit":t="cmd";break;case"Synth":case"Impl":case"Gen_Bit":t="branch"}return{light:`${this.opeParam.rootPath}/../images/svg/light/`+t+".svg",dark:`${this.opeParam.rootPath}/../images/svg/dark/`+t+".svg"}}getToolTip(e){let t="";switch(e){case"Launch":t="Launch FPGA development assist function";break;case"Simulate":t="Launch the manufacturer Simulation";break;case"Refresh":t="Refresh the current project file";break;case"Build":t="Build the current fpga project";break;case"Program":t="Download the bit file into the device";break;case"GUI":t="Open the GUI";break;case"Exit":t="Exit the current project";break;case"Synth":t="Synth the current project";break;case"Impl":t="Impl  the current project";break;case"Gen_Bit":t="Generate the BIT File"}return t}},t.sdkTreeDataProvider=class{constructor(e){this.opeParam=e}getChildren(e){return[{name:"Launch"},{name:"Build"},{name:"Download"}]}getTreeItem(e){let t=new o.TreeItem(e.name,o.TreeItemCollapsibleState.None);return t.contextValue="SDK",t.command=this.getCommand(e.name),t.tooltip=this.getToolTip(e.name),t.iconPath=this.getIconPath(e.name),t}getCommand(e){let t={title:e,command:""};switch(e){case"Launch":t.command="SDK.Launch";break;case"Build":t.command="SDK.Build";break;case"Download":t.command="SDK.Download"}return t}getIconPath(e){let t="";switch(e){case"Launch":case"Build":case"Download":t="cmd"}return{light:`${this.opeParam.rootPath}/../images/svg/light/`+t+".svg",dark:`${this.opeParam.rootPath}/../images/svg/dark/`+t+".svg"}}getToolTip(e){let t="";switch(e){case"Launch":t="Launch SDK development assist function";break;case"Build":t="Build the current SDK project";break;case"Download":t="Download the boot file into the device"}return t}},t.toolTreeDataProvider=class{constructor(e){this.opeParam=e}getChildren(e){return[{name:"BOOT"},{name:"Clean"},{name:"SerialPort"}]}getTreeItem(e){let t=new o.TreeItem(e.name,o.TreeItemCollapsibleState.None);return t.contextValue="TOOL",t.command=this.getCommand(e.name),t.tooltip=this.getToolTip(e.name),t.iconPath=this.getIconPath(e.name),t}getCommand(e){let t={title:e,command:""};switch(e){case"BOOT":t.command="TOOL.Gen_BOOT";break;case"Clean":t.command="TOOL.Clean";break;case"SerialPort":t.command="TOOL.SerialPort"}return t}getIconPath(e){let t="";switch(e){case"BOOT":t="BOOT";break;case"Clean":t="clean";break;case"SerialPort":t="SerialPort"}return{light:`${this.opeParam.rootPath}/../images/svg/light/`+t+".svg",dark:`${this.opeParam.rootPath}/../images/svg/dark/`+t+".svg"}}getToolTip(e){let t="";switch(e){case"BOOT":t="Launch SDK development assist function";break;case"Clean":t="Clean the current project";break;case"SerialPort":t="Launch Serial monitor"}return t}}},474:(e,t,n)=>{"use strict";const i=n(549),r=n(938),o=n(948),s=n(862),a=n(444);t.activate=function(e){let t=[],n={os:"",prjInfo:null,rootPath:"",workspacePath:"",currentSrcPath:"",prjInitParam:"",propertyPath:""};a.prjs.getOpeParam(`${__dirname}`,n),a.prjs.refreshPrjFiles(`${n.currentSrcPath}/src`,t),a.prjs.refreshPrjFiles(`${n.currentSrcPath}/sim`,t),t=t.concat(a.prjs.getLibParam(n));var l=i.window.createOutputChannel("HDL");const c=i.window.createStatusBarItem(i.StatusBarAlignment.Left,0);e.subscriptions.push(c),r.registerXilinxDesigner(n),r.registerDebugDesigner(n),r.registerSocDesigner(n),r.registerTreeServer(n);const u=new s.indexer(c,[]);u.build_index(t).then((()=>{console.log(u.HDLparam),u.updateMostRecentSymbols(void 0);var t=new r.lspCompletion.vlogCompletion(u.HDLparam),i=new r.tree.FileExplorer(u.HDLparam,n);a.monitor.monitor(n.workspacePath,n,u,l,(()=>{t.HDLparam=u.HDLparam,i.treeDataProvider.HDLparam=u.HDLparam,i.treeDataProvider.refresh()})),o.registerLinterServer(e),a.registerPrjsServer(e,n),r.registerSimServer(u,n),r.registerLspServer(e,u,t),r.registerBuildServer(e,u,n)}))},t.deactivate=function(){}},129:e=>{"use strict";e.exports=require("child_process")},614:e=>{"use strict";e.exports=require("events")},747:e=>{"use strict";e.exports=require("fs")},87:e=>{"use strict";e.exports=require("os")},622:e=>{"use strict";e.exports=require("path")},669:e=>{"use strict";e.exports=require("util")},549:e=>{"use strict";e.exports=require("vscode")}},t={};return function n(i){if(t[i])return t[i].exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}(474)})();